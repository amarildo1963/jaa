<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aniversariantes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(to right, #1a3a6c, #2c5282, #1a3a6c);
            color: white;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            letter-spacing: 1px;
        }
        
        .search-container {
            margin: 25px 0;
            text-align: center;
        }
        
        #search {
            width: 90%;
            max-width: 600px;
            padding: 15px 20px;
            border: 3px solid #gold;
            border-radius: 50px;
            font-size: 1.2rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }
        
        #search:focus {
            outline: none;
            border-color: #e6b400;
            box-shadow: 0 0 0 3px rgba(230, 180, 0, 0.3);
        }
        
        .panels-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin: 25px 0 35px;
            gap: 20px;
        }
        
        .panel {
            flex: 1;
            min-width: 250px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .panel h3 {
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
            font-size: 1.4rem;
        }
        
        .last15 h3 {
            color: #c00;
        }
        
        .next30 h3 {
            color: #0a0;
        }
        
        .panel-item {
            padding: 5px 0;
            border-bottom: 1px dashed #eee;
        }
        
        .last15 .panel-item {
            font-size: 0.85rem;
            color: #c00;
        }
        
        .next30 .panel-item {
            font-size: 0.85rem;
            color: #0a0;
        }
        
        .stats {
            text-align: center;
            margin: 25px 0;
            font-weight: bold;
            font-size: 1.2rem;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        .month-group {
            margin-bottom: 40px;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }
        
        .month-group:hover {
            transform: translateY(-5px);
        }
        
        .month-title {
            text-align: center;
            color: #c00;
            font-size: 2.2rem;
            font-weight: bold;
            margin-bottom: 25px;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            padding-bottom: 10px;
        }
        
        .month-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 3px;
            background: linear-gradient(to right, transparent, #e6b400, transparent);
            border-radius: 3px;
        }
        
        .persons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            padding: 10px;
        }
        
        .person-card {
            background: #f9f9f9;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .person-card:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            z-index: 10;
        }
        
        .person-card.highlight {
            background-color: #fff9e6 !important;
            border: 2px solid #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }
        
        .person-photo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid #e6b400;
            object-fit: cover;
            margin: 0 auto 15px;
            display: block;
            background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .person-name {
            color: #0066cc;
            font-weight: bold;
            font-size: 1.4rem;
            margin: 10px 0;
            min-height: 28px;
        }
        
        .person-birth {
            color: #008000;
            font-weight: bold;
            margin: 8px 0;
            font-size: 1.1rem;
        }
        
        .person-age {
            color: #008000;
            font-weight: bold;
            background: #e8f5e9;
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            margin-top: 5px;
            font-size: 1.15rem;
        }
        
        .person-death {
            color: #8B4513;
            margin: 10px 0;
            font-weight: 500;
        }
        
        .person-sign {
            margin-top: 8px;
            font-size: 1.15rem;
            font-weight: 500;
        }
        
        .zodiac-symbol {
            font-size: 1.8rem;
            margin-right: 5px;
            vertical-align: middle;
        }
        
        .birthday-message {
            margin-top: 10px;
            font-weight: bold;
            animation: blink 1s step-end infinite;
            font-size: 1.15rem;
            padding: 5px;
            border-radius: 8px;
        }
        
        @keyframes blink {
            50% { opacity: 0; }
        }
        
        .birthday-today {
            color: #ff0000;
            background: #fff0f0;
        }
        
        .would-be-birthday {
            color: #ff0000;
            background: #f0e6ff;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 25px;
            color: #1a3a6c;
            font-weight: bold;
            border-top: 2px solid #e6b400;
            font-size: 1.1rem;
        }
        
        .special-card {
            background: linear-gradient(135deg, #e60000 0%, #990000 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(153, 0, 0, 0.3);
        }
        
        .special-card .person-name {
            color: #fffacd;
            font-size: 1.6rem;
        }
        
        .special-card .person-birth,
        .special-card .person-age,
        .special-card .person-death,
        .special-card .person-sign {
            display: none;
        }
        
        @media (max-width: 768px) {
            .panels-container {
                flex-direction: column;
            }
            
            .persons-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
            
            h1 {
                font-size: 2.3rem;
            }
            
            .month-title {
                font-size: 1.9rem;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .persons-grid {
                grid-template-columns: 1fr;
            }
            
            .person-photo {
                width: 100px;
                height: 100px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .month-title {
                font-size: 1.7rem;
            }
            
            .search-container {
                margin: 15px 0;
            }
            
            #search {
                width: 95%;
                padding: 12px 15px;
                font-size: 1rem;
            }
        }
        
        .highlight-text {
            background-color: #fff9a8;
            font-weight: bold;
            padding: 0 2px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <header>
        <h2>ANIVERSARIANTES</h2>
    </header>
    
    <div class="search-container">
        <input type="text" id="search" placeholder="Buscar por nome, mês ou signo...">
    </div>
    
    <div class="panels-container">
        <div class="panel last15">
            <h3>Aniversariantes há 30 dias atrás:</h3>
            <div id="last15-list"></div>
        </div>
        <div class="panel next30">
            <h3>Aniversariantes daqui 30 dias:</h3>
            <div id="next30-list"></div>
        </div>
    </div>
    
    <div class="stats">
        Total registros: <span id="total">0</span> | Filtrado: <span id="filtered">0</span>
    </div>
    
    <div id="persons-container"></div>
    
    <footer>
        ©Amarildo, 2016-2026<br>
        Atualizado: 01/02/2026
    </footer>

    <script>
        // Dados das pessoas
        const data = `
INGRID GRAZIELA FERNANDES ANERÃO,*06/01/1997,ingrid.jpg
MARIA AMARILZA ANERÃO,*14/01/1969,amarilza.jpg
SANDRA REGINA MOLLER DE CAMPOS,*22/01/1964,+20/07/2020,sandra.jpg
ROSA FRACHELLI ANERÃO,*01/02/1901,+15/01/1971,rosa_frachelli.jpg
BRAZ GESTICH,*03/02/1944,+08/05/2023,braz.jpg
HUMBERTO DONIZETE ANERÃO,*22/02/1961,+14/07/2021,humberto.png
PRISCILA TOLEDO RETI,*03/03/1990,priscila.jpg                                                    
VALERIA APARECIDA GESTICH,*07/03/1988,valeria.jpg
IRIA RIBEIRO ANERÃO,*23/03/1930,+10/01/1979,iria.jpg
ZULMIRA BORGES GESTICH,*25/03/1907,+19/09/1964,zulmira.JPG
NICOLAS MIGUEL ANERÃO FONSECA,*25/03/2014,nicolas.jpg
JOSÉ AMARILDO ANERÃO,*30/03/1963,amarildo.jpg
IVANIRA FERREIRA LIMA,*01/04/1973,ivanira.jpg
MARIA DE LOURDES MALAQUIAS GESTICH,*07/04/1955,maria_lourdes.jpg
ROSA APARECIDA ANERÃO DE JESUS,*08/04/1950,+20/09/2021,rosa_aparecida.jpg
AURORA RIBEIRO,*16/04/1946,aurora.jpg
ARLINDO FRANCISCO RIBEIRO,*16/04/1948,+24/10/2001,arlindo.jpg
DIONATAS WILLIAN DE SOUZA FONSECA,*18/04/1992,dionatas.jpg
CAROLINA GABRIELA FERNANDES ANERÃO,*04/05/1994,carolina.jpg
JOSÉ REGINALDO GESTICH,*29/05/1980,jose_reginaldo.jpg
KARINA KRISTINA LIMA ANERÃO,*30/05/1996,karina.jpg
GENÉSIO DE SOUZA,*11/06/1947,+08/02/2000,genesio.jpg
AMÉLIA ANERÃO DONEDA,*15/06/1926,+23/02/2020,amelia.png
JOÃO PAULO GESTICH,*19/06/1984,joao_paulo.jpg
JOÃO GESTICH,*24/06/1895,+04/05/1980,joao_gestich.jpg
LEONOR OLIVEIRA DE SOUZA,*29/06/1951,+21/03/2019,leonor.jpg
GUILHERME GABRIEL FERNANDES ANERÃO,*06/07/2009,guilherme.jpg
ELIAS GESTICH,*27/07/1948,elias.jpg
ANTONIO FERNANDES DE LIMA,*18/08/1943,+28/02/2019,antonio_lima.jpg
JOÃO ANERÃO,*24/08/1924,+30/01/2007,joao_anerao.png
JOSÉ ANERÃO,*25/08/1889,+11/08/1976,jose_anerao.jpg
LAURA RACHEL DIAS LINS ANERÃO,*05/09/1982,laura.jpg
APARECIDA ORDÁLIA GARCIA DE LIMA,*07/09/1943,aparecida.jpg
MARIA CRISTINA ANERÃO,*10/09/1941,+12/03/2023,cristina.jpg
LEANDRO HENRIQUE DE LIMA NETO,*29/09/1990,leandro.jpg
PAULO DE ASSIS ANERÃO,*18/10/1962,paulo.jpg
ANTONIO AMAURI ANERÃO,*19/10/1965,amauri.jpg
SONIA REGINA MOLLER,*21/10/1975,+10/10/2019,sonia.jpg
ANTONIO AMAURI ANERÃO JUNIOR,*24/10/1991,amauri_jr.jpg
SOLAMITA FERNANDES DE LIMA,*30/10/1972,solamita.jpg
VICENTE GESTICH,*13/11/1938,+27/05/2022,vicente.jpg
LUIZ FERNANDO LIMA ANERÃO,*27/11/2005,luiz.jpg
ARVELINO ANERÃO,*29/11/1937,+02/07/2007,arvelino.png
SANDRO FERNANDES DE LIMA,*29/11/1974,+23/12/2016,sandro.jpg
ANTONIO GESTICH,*02/12/1951,antonio_gestich.jpg
ROSA LIA ANERÃO MOLLER,*15/12/1943,rosalina.jpg
RITA DE CÁSSIA RIBEIRO,*18/12/1974,rita.jpg
REGINA APARECIDA RIBEIRO,*21/12/1971,regina.jpg
25/12 NATAL DO MENINO JESUS,jesus.jpg
        `.trim().split('\n');
        
        // Função para remover acentos
        function removeAccents(str) {
            return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
        }
        
        // Função para calcular idade
        function calculateAge(birthDate, deathDate = null) {
            const today = deathDate ? new Date(deathDate) : new Date();
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            const dayDiff = today.getDate() - birthDate.getDate();
            
            if (monthDiff < 0 || (monthDiff === 0 && dayDiff < 0)) {
                age--;
            }
            
            return age;
        }
        
        // Função para calcular anos desde o falecimento
        function yearsSinceDeath(deathDate) {
            const today = new Date();
            let years = today.getFullYear() - deathDate.getFullYear();
            const monthDiff = today.getMonth() - deathDate.getMonth();
            const dayDiff = today.getDate() - deathDate.getDate();
            
            if (monthDiff < 0 || (monthDiff === 0 && dayDiff < 0)) {
                years--;
            }
            
            return years;
        }
        
        // Função para obter signo do zodíaco
        function getZodiacSign(day, month) {
            const zodiacSigns = [
                { sign: "Capricórnio", symbol: "♑", start: [22, 12], end: [19, 1] },
                { sign: "Aquário", symbol: "♒", start: [20, 1], end: [18, 2] },
                { sign: "Peixes", symbol: "♓", start: [19, 2], end: [20, 3] },
                { sign: "Áries", symbol: "♈", start: [21, 3], end: [19, 4] },
                { sign: "Touro", symbol: "♉", start: [20, 4], end: [20, 5] },
                { sign: "Gêmeos", symbol: "♊", start: [21, 5], end: [20, 6] },
                { sign: "Câncer", symbol: "♋", start: [21, 6], end: [22, 7] },
                { sign: "Leão", symbol: "♌", start: [23, 7], end: [22, 8] },
                { sign: "Virgem", symbol: "♍", start: [23, 8], end: [22, 9] },
                { sign: "Libra", symbol: "♎", start: [23, 9], end: [22, 10] },
                { sign: "Escorpião", symbol: "♏", start: [23, 10], end: [21, 11] },
                { sign: "Sagitário", symbol: "♐", start: [22, 11], end: [21, 12] },
                { sign: "Capricórnio", symbol: "♑", start: [22, 12], end: [31, 12] }
            ];
            
            for (const sign of zodiacSigns) {
                const startMonth = sign.start[1];
                const startDay = sign.start[0];
                const endMonth = sign.end[1];
                const endDay = sign.end[0];
                
                if ((month === startMonth && day >= startDay) || 
                    (month === endMonth && day <= endDay) ||
                    (startMonth < endMonth && month > startMonth && month < endMonth)) {
                    return { sign: sign.sign, symbol: sign.symbol };
                }
            }
            
            return { sign: "Desconhecido", symbol: "?" };
        }
        
        // Função para formatar data para dd/mm
        function formatDateDM(date) {
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            return `${day}/${month}`;
        }
        
        // Função para formatar data completa para dd/mm/yyyy
        function formatDate(date) {
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        }
        
        // Processar dados
        const persons = [];
        const photoBaseUrl = "https://amarildo1963.github.io/jaa/fotos/";
        
        data.forEach(line => {
            line = line.trim();
            if (!line) return;
            
            // Caso especial: Natal
            if (line.includes("25/12 NATAL DO MENINO JESUS")) {
                persons.push({
                    name: "NATAL DO MENINO JESUS",
                    isSpecial: true,
                    birthDate: new Date(2000, 11, 25), // 25 de dezembro
                    photo: "jesus.jpg",
                    day: 25,
                    month: 12
                });
                return;
            }
            
            // Dividir a linha em partes
            const parts = line.split(',').map(part => part.trim());
            if (parts.length < 2) return;
            
            // Extrair nome (primeira parte)
            let name = parts[0];
            
            // Identificar datas e foto
            let birthDateStr = null;
            let deathDateStr = null;
            let photo = null;
            
            for (let i = 1; i < parts.length; i++) {
                if (parts[i].startsWith('*')) {
                    birthDateStr = parts[i].substring(1).trim();
                } else if (parts[i].startsWith('+')) {
                    deathDateStr = parts[i].substring(1).trim();
                } else if (parts[i].includes('.')) {
                    photo = parts[i];
                }
            }
            
            // Parse das datas
            let birthDate = null;
            let deathDate = null;
            
            if (birthDateStr) {
                const [day, month, year] = birthDateStr.split('/').map(Number);
                birthDate = new Date(year, month - 1, day);
            }
            
            if (deathDateStr) {
                const [day, month, year] = deathDateStr.split('/').map(Number);
                deathDate = new Date(year, month - 1, day);
            }
            
            // Calcular idade
            let age = null;
            let yearsSinceDeathValue = null;
            
            if (birthDate) {
                if (deathDate) {
                    age = calculateAge(birthDate, deathDate);
                    yearsSinceDeathValue = yearsSinceDeath(deathDate);
                } else {
                    age = calculateAge(birthDate);
                }
            }
            
            // Obter signo
            let zodiac = null;
            if (birthDate) {
                zodiac = getZodiacSign(birthDate.getDate(), birthDate.getMonth() + 1);
            }
            
            // Adicionar pessoa ao array
            persons.push({
                name,
                birthDate,
                deathDate,
                photo,
                age,
                yearsSinceDeath: yearsSinceDeathValue,
                zodiac,
                day: birthDate ? birthDate.getDate() : null,
                month: birthDate ? birthDate.getMonth() + 1 : null,
                isSpecial: false
            });
        });
        
        // Obter elementos DOM
        const personsContainer = document.getElementById('persons-container');
        const searchInput = document.getElementById('search');
        const totalElement = document.getElementById('total');
        const filteredElement = document.getElementById('filtered');
        const last15List = document.getElementById('last15-list');
        const next30List = document.getElementById('next30-list');
        
        // Atualizar contagem total
        totalElement.textContent = persons.length;
        
        // Gerar listas de aniversariantes recentes e futuros
        function generateBirthdayLists() {
            const today = new Date();
            const last15Days = [];
            const next30Days = [];
            
            // Gerar datas dos últimos 30 dias
            for (let i = 30; i >= 1; i--) {
                const date = new Date();
                date.setDate(today.getDate() - i);
                last15Days.push(formatDateDM(date));
            }
            
            // Gerar datas dos próximos 30 dias (incluindo hoje)
            for (let i = 0; i <= 30; i++) {
                const date = new Date();
                date.setDate(today.getDate() + i);
                next30Days.push(formatDateDM(date));
            }
            
            // Filtrar pessoas para os últimos 30 dias
            const last15Persons = persons.filter(person => {
                if (person.isSpecial) return false;
                if (!person.birthDate) return false;
                const birthDM = formatDateDM(person.birthDate);
                return last15Days.includes(birthDM);
            }).map(person => ({
                dm: formatDateDM(person.birthDate),
                name: person.name
            }));
            
            // Filtrar pessoas para os próximos 30 dias
            const next30Persons = persons.filter(person => {
                if (person.isSpecial) return false;
                if (!person.birthDate) return false;
                const birthDM = formatDateDM(person.birthDate);
                return next30Days.includes(birthDM);
            }).map(person => ({
                dm: formatDateDM(person.birthDate),
                name: person.name
            }));
            
            // Renderizar listas
            renderBirthdayList(last15List, last15Persons);
            renderBirthdayList(next30List, next30Persons);
        }
        
        function renderBirthdayList(container, persons) {
            container.innerHTML = '';
            
            if (persons.length === 0) {
                container.innerHTML = '<div style="text-align:center;padding:10px;color:#777">Nenhum aniversariante neste período</div>';
                return;
            }
            
            // Ordenar por data
            persons.sort((a, b) => {
                const [dayA, monthA] = a.dm.split('/');
                const [dayB, monthB] = b.dm.split('/');
                const dateA = new Date(2000, parseInt(monthA) - 1, parseInt(dayA));
                const dateB = new Date(2000, parseInt(monthB) - 1, parseInt(dayB));
                return dateA - dateB;
            });
            
            persons.forEach(person => {
                const div = document.createElement('div');
                div.className = 'panel-item';
                div.textContent = `${person.dm} - ${person.name}`;
                container.appendChild(div);
            });
        }
        
        // Renderizar todas as pessoas
        function renderPersons(filteredPersons = null) {
            personsContainer.innerHTML = '';
            
            // Usar pessoas filtradas ou todas
            const personsToShow = filteredPersons || persons;
            filteredElement.textContent = personsToShow.length;
            
            // Agrupar por mês
            const months = Array.from({ length: 12 }, (_, i) => i + 1);
            const monthNames = [
                "JANEIRO", "FEVEREIRO", "MARÇO", "ABRIL", "MAIO", "JUNHO",
                "JULHO", "AGOSTO", "SETEMBRO", "OUTUBRO", "NOVEMBRO", "DEZEMBRO"
            ];
            
            months.forEach(month => {
                const monthPersons = personsToShow.filter(p => 
                    !p.isSpecial && p.month === month
                ).sort((a, b) => a.day - b.day);
                
                // Adicionar pessoas especiais (Natal) em dezembro
                if (month === 12) {
                    const specialPersons = personsToShow.filter(p => p.isSpecial && p.month === month);
                    monthPersons.push(...specialPersons);
                }
                
                if (monthPersons.length > 0) {
                    const monthGroup = document.createElement('div');
                    monthGroup.className = 'month-group';
                    
                    const monthTitle = document.createElement('div');
                    monthTitle.className = 'month-title';
                    monthTitle.textContent = monthNames[month - 1];
                    monthGroup.appendChild(monthTitle);
                    
                    const personsGrid = document.createElement('div');
                    personsGrid.className = 'persons-grid';
                    
                    monthPersons.forEach(person => {
                        const personCard = createPersonCard(person);
                        personsGrid.appendChild(personCard);
                    });
                    
                    monthGroup.appendChild(personsGrid);
                    personsContainer.appendChild(monthGroup);
                }
            });
        }
        
        // Criar card de pessoa
        function createPersonCard(person) {
            const card = document.createElement('div');
            card.className = `person-card ${person.isSpecial ? 'special-card' : ''}`;
            
            // URL da foto
            const photoUrl = photoBaseUrl + (person.photo || 'default.jpg');
            
            // Verificar se é aniversário hoje
            const today = new Date();
            const isBirthdayToday = person.birthDate && 
                person.birthDate.getDate() === today.getDate() && 
                person.birthDate.getMonth() === today.getMonth();
            
            // Montar conteúdo do card
            let cardContent = `
                <img src="${photoUrl}" alt="${person.name}" class="person-photo" onerror="this.src='https://via.placeholder.com/120?text=Foto+Indispon%C3%ADvel'">
                <div class="person-name">${highlightSearch(person.name)}</div>
            `;
            
            // Para casos especiais (Natal)
            if (person.isSpecial) {
                card.innerHTML = cardContent;
                return card;
            }
            
            // Data de nascimento
            cardContent += `<div class="person-birth">* ${formatDate(person.birthDate)}${person.zodiac ? ` <span class="person-sign"><span class="zodiac-symbol">${person.zodiac.symbol}</span> ${person.zodiac.sign}</span>` : ''}</div>`;
            
            // Idade
            if (person.age !== null) {
                cardContent += `<div class="person-age">${person.age} anos</div>`;
            }
            
            // Data de falecimento
            if (person.deathDate) {
                cardContent += `<div class="person-death">✝ ${formatDate(person.deathDate)} (${person.yearsSinceDeath} anos)</div>`;
            }
            
            // Mensagem de aniversário
            if (isBirthdayToday) {
                if (person.deathDate) {
                    cardContent += `<div class="birthday-message would-be-birthday">Faria aniversário hoje!</div>`;
                } else {
                    cardContent += `<div class="birthday-message birthday-today">Parabéns, Feliz Aniversário!</div>`;
                }
            }
            
            card.innerHTML = cardContent;
            return card;
        }
        
        // Destacar texto da busca
        function highlightSearch(text) {
            const searchTerm = removeAccents(searchInput.value).toLowerCase();
            if (!searchTerm) return text;
            
            const normalizedText = removeAccents(text).toLowerCase();
            const index = normalizedText.indexOf(searchTerm);
            
            if (index === -1) return text;
            
            const before = text.substring(0, index);
            const match = text.substring(index, index + searchTerm.length);
            const after = text.substring(index + searchTerm.length);
            
            return `${before}<span class="highlight-text">${match}</span>${after}`;
        }
        
        // Filtrar pessoas com base na busca
        function filterPersons() {
            const searchTerm = removeAccents(searchInput.value).toLowerCase();
            
            if (!searchTerm) {
                renderPersons();
                return;
            }
            
            const filtered = persons.filter(person => {
                // Normalizar dados para busca
                const normalizedName = removeAccents(person.name).toLowerCase();
                const normalMonth = person.birthDate ? 
                    removeAccents([
                        "janeiro", "fevereiro", "marco", "abril", "maio", "junho",
                        "julho", "agosto", "setembro", "outubro", "novembro", "dezembro"
                    ][person.birthDate.getMonth()]).toLowerCase() : '';
                const normalSign = person.zodiac ? removeAccents(person.zodiac.sign).toLowerCase() : '';
                const birthDM = person.birthDate ? formatDateDM(person.birthDate).replace('/', '') : '';
                
                // Verificar se corresponde a algum critério
                return (
                    normalizedName.includes(searchTerm) ||
                    normalMonth.includes(searchTerm) ||
                    normalSign.includes(searchTerm) ||
                    birthDM.includes(searchTerm.replace('/', ''))
                );
            });
            
            renderPersons(filtered);
        }
        
        // Inicializar
        searchInput.addEventListener('input', filterPersons);
        generateBirthdayLists();
        renderPersons();
        
        // Atualizar listas de aniversariantes a cada minuto (para atualização em tempo real)
        setInterval(generateBirthdayLists, 60000);
    </script>
</body>
</html>
