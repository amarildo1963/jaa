<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aniversariantes - J.A. Anerão</title>
    <style>
        :root {
            --ouro: #d4af37;
            --azul: #0000FF;
            --verde: #008000;
            --marrom: #8B4513;
            --vermelho: #FF0000;
        }

        body { font-family: Arial, sans-serif; text-align: center; background-color: #f4f4f4; padding: 20px; }
        h2 { color: var(--vermelho); }

        /* Busca e Filtros */
        .controles { margin-bottom: 20px; background: #fff; padding: 15px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        input[type="text"] { padding: 10px; width: 80%; max-width: 400px; border: 2px solid var(--ouro); border-radius: 5px; }
        .btn-group { margin-top: 10px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
        
        button {
            padding: 10px 20px; font-weight: bold; cursor: pointer;
            border: none; border-radius: 5px; color: white;
            background: linear-gradient(to bottom, #7d7d7d, #333);
            box-shadow: 0 4px #1a1a1a; transition: 0.2s;
        }
        button:active { box-shadow: 0 2px #1a1a1a; transform: translateY(2px); }
        .btn-todos { background: linear-gradient(to bottom, #5bc0de, #2e6da4); }

        /* Layout */
        .mes-container { margin-top: 30px; }
        .mes-titulo { color: var(--vermelho); font-weight: bold; font-size: 1.5rem; text-transform: uppercase; margin: 20px 0; border-bottom: 2px solid var(--vermelho); }
        
        .grid-aniversariantes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px; padding: 10px;
        }

        .card {
            background: white; padding: 15px; border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .moldura {
            width: 120px; height: 120px; margin: 0 auto 10px;
            border: 5px solid var(--ouro); border-radius: 50%;
            overflow: hidden; box-shadow: 0 0 10px var(--ouro);
        }
        .moldura img { width: 100%; height: 100%; object-fit: cover; }

        .nome { color: var(--azul); font-weight: bold; font-size: 1.1rem; }
        .nascimento, .idade { color: var(--verde); font-weight: bold; margin: 5px 0; }
        .falecimento { color: var(--marrom); margin: 5px 0; }
        .signo { font-size: 1.2rem; margin-top: 5px; }
        
        .piscante {
            color: var(--vermelho); font-weight: bold;
            animation: pisca 1s infinite;
        }
        @keyframes pisca { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }

        mark { background-color: yellow; color: black; }
        
        footer { margin-top: 50px; font-size: 0.8rem; border-top: 1px solid #ccc; padding-top: 10px; }
    </style>
</head>
<body>

    <h2>ANIVERSARIANTES</h2>

    <div class="controles">
        <input type="text" id="busca" placeholder="Busque por nome, mês ou signo..." onkeyup="filtrar()">
        <div class="btn-group">
            <button class="btn-todos" onclick="setFiltro('todos')">Todos</button>
            <button onclick="setFiltro('mes_atual')">Mês Atual</button>
            <button onclick="setFiltro('mes_anterior')">Mês Anterior</button>
            <button onclick="setFiltro('vivos')">Vivos</button>
            <button onclick="setFiltro('falecidos')">Falecidos</button>
            <button onclick="limparFiltros()" style="background: #a94442;">Limpar Filtros</button>
        </div>
        <p>Total registros: <span id="total">0</span> | Filtrados: <span id="filtrados">0</span></p>
    </div>

    <div id="lista-aniversariantes"></div>

    <footer>
        ©J.A.Anerão, 2016-2026<br>
        Atualizado: 03/02/2026
    </footer>

<script>
    const server = "https://amarildo1963.github.io/jaa/fotos/";
    const rawData = [
        "INGRID GRAZIELA FERNANDES ANERÃO,*06/01/1997,ingrid.jpg",
        "MARIA AMARILZA ANERÃO,*14/01/1969,amarilza.jpg",
        "SANDRA REGINA MOLLER DE CAMPOS,*22/01/1964,+20/07/2020,sandra.jpg",
        "ROSA FRACHELLI ANERÃO,*01/02/1901,+15/01/1971,rosa_frachelli.jpg",
        "BRAZ GESTICH,*03/02/1944,+08/05/2023,braz.jpg",
        "HUMBERTO DONIZETE ANERÃO,*22/02/1961,+14/07/2021,humberto.png",
        "PRISCILA TOLEDO RETI,*03/03/1990,priscila.jpg",
        "VALERIA APARECIDA GESTICH,*07/03/1988,valeria.jpg",
        "IRIA RIBEIRO ANERÃO,*23/03/1930,+10/01/1979,iria.jpg",
        "ZULMIRA BORGES GESTICH,*25/03/1907,+19/09/1964,zulmira.JPG",
        "NICOLAS MIGUEL ANERÃO FONSECA,*25/03/2014,nicolas.jpg",
        "JOSÉ AMARILDO ANERÃO,*30/03/1963,amarildo.jpg",
        "IVANIRA FERREIRA LIMA,*01/04/1973,ivanira.jpg",
        "MARIA DE LOURDES MALAQUIAS GESTICH,*07/04/1955,maria_lourdes.jpg",
        "ROSA APARECIDA ANERÃO DE JESUS,*08/04/1950,+20/09/2021,rosa_aparecida.jpg",
        "AURORA RIBEIRO,*16/04/1946,aurora.jpg",
        "ARLINDO FRANCISCO RIBEIRO,*16/04/1948,+24/10/2001,arlindo.jpg",
        "DIONATAS WILLIAN DE SOUZA FONSECA,*18/04/1992,dionatas.jpg",
        "CAROLINA GABRIELA FERNANDES ANERÃO,*04/05/1994,carolina.jpg",
        "JOSÉ REGINALDO GESTICH,*29/05/1980,jose_reginaldo.jpg",
        "KARINA KRISTINA LIMA ANERÃO,*30/05/1996,karina.jpg",
        "GENÉSIO DE SOUZA,*11/06/1947,+08/02/2000,genesio.jpg",
        "AMÉLIA ANERÃO DONEDA,*15/06/1926,+23/02/2020,amelia.png",
        "JOÃO PAULO GESTICH,*19/06/1984,joao_paulo.jpg",
        "JOÃO GESTICH,*24/06/1895,+04/05/1980,joao_gestich.jpg",
        "LEONOR OLIVEIRA DE SOUZA,*29/06/1951,+21/03/2019,leonor.jpg",
        "GUILHERME GABRIEL FERNANDES ANERÃO,*06/07/2009,guilherme.jpg",
        "ELIAS GESTICH,*27/07/1948,elias.jpg",
        "ANTONIO FERNANDES DE LIMA,*18/08/1943,+28/02/2019,antonio_lima.jpg",
        "JOÃO ANERÃO,*24/08/1924,+30/01/2007,joao_anerao.png",
        "JOSÉ ANERÃO,*25/08/1889,+11/08/1976,jose_anerao.jpg",
        "LAURA RACHEL DIAS LINS ANERÃO,*05/09/1982,laura.jpg",
        "APARECIDA ORDÁLIA GARCIA DE LIMA,*07/09/1943,aparecida.jpg",
        "MARIA CRISTINA ANERÃO,*10/09/1941,+12/03/2023,cristina.jpg",
        "LEANDRO HENRIQUE DE LIMA NETO,*29/09/1990,leandro.jpg",
        "PAULO DE ASSIS ANERÃO,*18/10/1962,paulo.jpg",
        "ANTONIO AMAURI ANERÃO,*19/10/1965,amauri.jpg",
        "SONIA REGINA MOLLER,*21/10/1975,+10/10/2019,sonia.jpg",
        "ANTONIO AMAURI ANERÃO JUNIOR,*24/10/1991,amauri_jr.jpg",
        "SOLAMITA FERNANDES DE LIMA,*30/10/1972,solamita.jpg",
        "VICENTE GESTICH,*13/11/1938,+27/05/2022,vicente.jpg",
        "LUIZ FERNANDO LIMA ANERÃO,*27/11/2005,luiz.jpg",
        "ARVELINO ANERÃO,*29/11/1937,+02/07/2007,arvelino.png",
        "SANDRO FERNANDES DE LIMA,*29/11/1974,+23/12/2016,sandro.jpg",
        "ANTONIO GESTICH,*02/12/1951,antonio_gestich.jpg",
        "ROSA LIA ANERÃO MOLLER,*15/12/1943,rosalina.jpg",
        "RITA DE CÁSSIA RIBEIRO,*18/12/1974,rita.jpg",
        "REGINA APARECIDA RIBEIRO,*21/12/1971,regina.jpg",
        "25/12 NATAL DO MENINO JESUS,jesus.jpg"
    ];

    const mesesNomes = ["JANEIRO", "FEVEREIRO", "MARÇO", "ABRIL", "MAIO", "JUNHO", "JULHO", "AGOSTO", "SETEMBRO", "OUTUBRO", "NOVEMBRO", "DEZEMBRO"];

    function parseData(str) {
        if (!str) return null;
        const [d, m, y] = str.split('/').map(Number);
        return { d, m, y, date: new Date(y, m - 1, d) };
    }

    function getSigno(dia, mes) {
        const signos = [
            { n: "Capricórnio", s: "♑", d: 20, m: 1 }, { n: "Aquário", s: "♒", d: 18, m: 2 },
            { n: "Peixes", s: "♓", d: 20, m: 3 }, { n: "Áries", s: "♈", d: 19, m: 4 },
            { n: "Touro", s: "♉", d: 20, m: 5 }, { n: "Gêmeos", s: "♊", d: 20, m: 6 },
            { n: "Câncer", s: "♋", d: 22, m: 7 }, { n: "Leão", s: "♌", d: 22, m: 8 },
            { n: "Virgem", s: "♍", d: 22, m: 9 }, { n: "Libra", s: "♎", d: 22, m: 10 },
            { n: "Escorpião", s: "♏", d: 21, m: 11 }, { n: "Sagitário", s: "♐", d: 21, m: 12 }
        ];
        const res = signos.find(s => (mes === s.m && dia <= s.d) || (mes === s.m - 1 && dia > s.d));
        return res || { n: "Capricórnio", s: "♑" };
    }

    function calcularIdade(nasc, falec = null) {
        const fim = falec ? falec.date : new Date();
        let idade = fim.getFullYear() - nasc.y;
        const m = fim.getMonth() - (nasc.m - 1);
        if (m < 0 || (m === 0 && fim.getDate() < nasc.d)) idade--;
        return idade;
    }

    const pessoas = rawData.map(linha => {
        if (linha.includes("NATAL")) {
            const partes = linha.split(',');
            return { nome: partes[0], foto: partes[1], isNatal: true, mes: 12, dia: 25 };
        }
        const partes = linha.split(',');
        const nome = partes[0];
        const nascStr = partes.find(p => p.startsWith('*'))?.substring(1);
        const falecStr = partes.find(p => p.startsWith('+'))?.substring(1);
        const foto = partes[partes.length - 1];
        
        const nasc = parseData(nascStr);
        const falec = parseData(falecStr);
        const signo = getSigno(nasc.d, nasc.m);

        return {
            nome, nasc, falec, foto, signo,
            idade: calcularIdade(nasc, falec),
            anosFalecimento: falec ? calcularIdade(falec) : null,
            isNatal: false
        };
    });

    document.getElementById('total').innerText = pessoas.length;

    let filtroAtivo = 'todos';

    function normalizar(texto) {
        return texto.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
    }

    function renderizar(dados = pessoas, busca = "") {
        const container = document.getElementById('lista-aniversariantes');
        container.innerHTML = "";
        let count = 0;

        const hoje = new Date();
        const dHoje = hoje.getDate();
        const mHoje = hoje.getMonth() + 1;

        mesesNomes.forEach((mesNome, idx) => {
            const mesNum = idx + 1;
            const pessoasMes = dados.filter(p => (p.nasc?.m === mesNum) || (p.isNatal && p.mes === mesNum));
            
            if (pessoasMes.length > 0) {
                pessoasMes.sort((a, b) => (a.nasc?.d || a.dia) - (b.nasc?.d || b.dia));
                
                const divMes = document.createElement('div');
                divMes.className = 'mes-container';
                divMes.innerHTML = `<div class="mes-titulo">${mesNome}</div><div class="grid-aniversariantes"></div>`;
                const grid = divMes.querySelector('.grid-aniversariantes');

                pessoasMes.forEach(p => {
                    count++;
                    const card = document.createElement('div');
                    card.className = 'card';
                    
                    let html = `<div class="moldura"><img src="${server}${p.foto}"></div>`;
                    
                    let nomeExibicao = p.nome;
                    if (busca) {
                        const regex = new RegExp(`(${busca})`, 'gi');
                        nomeExibicao = p.nome.replace(regex, '<mark>$1</mark>');
                    }

                    html += `<div class="nome">${nomeExibicao}</div>`;

                    if (p.isNatal) {
                        grid.innerHTML += `<div class="card">${html}</div>`;
                        return;
                    }

                    const ehAniv = p.nasc.d === dHoje && p.nasc.m === mHoje;
                    if (ehAniv) {
                        html += `<div class="piscante">${p.falec ? 'Faria aniversário hoje!' : 'Parabéns, Feliz Aniversário!'}</div>`;
                    }

                    html += `<div class="nascimento">* ${String(p.nasc.d).padStart(2,'0')}/${String(p.nasc.m).padStart(2,'0')}/${p.nasc.y}</div>`;
                    html += `<div class="idade">${p.idade} anos</div>`;
                    
                    if (p.falec) {
                        html += `<div class="falecimento">† ${String(p.falec.d).padStart(2,'0')}/${String(p.falec.m).padStart(2,'0')}/${p.falec.y}</div>`;
                        html += `<div class="falecimento">(há ${p.anosFalecimento} anos)</div>`;
                    }

                    html += `<div class="signo">${p.signo.s} ${p.signo.n}</div>`;
                    card.innerHTML = html;
                    grid.appendChild(card);
                });
                container.appendChild(divMes);
            }
        });
        document.getElementById('filtrados').innerText = count;
    }

    function filtrar() {
        const termo = normalizar(document.getElementById('busca').value);
        const filtrados = pessoas.filter(p => {
            const matchBusca = normalizar(p.nome).includes(termo) || 
                               (p.signo && normalizar(p.signo.n).includes(termo)) ||
                               (p.nasc && mesesNomes[p.nasc.m-1].toLowerCase().includes(termo));
            
            const hoje = new Date();
            if (filtroAtivo === 'mes_atual') return matchBusca && p.nasc?.m === (hoje.getMonth() + 1);
            if (filtroAtivo === 'mes_anterior') {
                let mesAnt = hoje.getMonth(); 
                if (mesAnt === 0) mesAnt = 12;
                return matchBusca && p.nasc?.m === mesAnt;
            }
            if (filtroAtivo === 'vivos') return matchBusca && !p.falec;
            if (filtroAtivo === 'falecidos') return matchBusca && p.falec;
            
            return matchBusca;
        });
        renderizar(filtrados, termo);
    }

    function setFiltro(f) { filtroAtivo = f; filtrar(); }
    function limparFiltros() { 
        document.getElementById('busca').value = ""; 
        filtroAtivo = 'todos'; 
        filtrar(); 
    }

    // Inicialização
    renderizar();
</script>
</body>
</html>
