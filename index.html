<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aniversariantes</title>
    <style>
        :root {
            --azul: #0000FF;
            --verde: #008000;
            --cinza: #808080;
            --vermelho: #FF0000;
            --dourado: #D4AF37;
        }
        body { font-family: sans-serif; background: #f4f4f4; text-align: center; }
        .container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 10px; }
        
        /* Busca */
        #busca { width: 90%; padding: 10px; margin-bottom: 20px; font-size: 16px; border: 1px solid #ccc; border-radius: 5px; }
        .highlight { background-color: yellow; font-weight: bold; }

        /* Estilos de Lista */
        .mes-titulo { color: var(--vermelho); font-weight: bold; text-transform: uppercase; margin-top: 30px; border-bottom: 2px solid var(--vermelho); }
        .pessoa-card { margin: 20px 0; display: flex; flex-direction: column; align-items: center; }
        
        .foto-moldura {
            width: 150px; height: 150px;
            border-radius: 50%;
            border: 5px solid var(--dourado);
            object-fit: cover;
            margin-bottom: 10px;
        }

        .nome { color: var(--azul); font-weight: bold; font-size: 1.2em; text-transform: uppercase; }
        .nascimento { color: var(--verde); font-weight: bold; }
        .falecimento { color: var(--cinza); }
        .signo { font-size: 0.9em; margin-top: 5px; }
        
        /* Animação Parabéns */
        .piscante {
            color: var(--vermelho);
            font-weight: bold;
            animation: pisca 1s infinite;
        }
        @keyframes pisca { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }

        footer { margin-top: 50px; font-size: 0.8em; color: #666; }
    </style>
</head>
<body>

<div class="container">
    <h2>ANIVERSARIANTES</h2>
    
    <input type="text" id="busca" placeholder="Busque por nome, mês ou signo..." onkeyup="filtrar()">
    
    <p>Total de Registros: <span id="total">0</span></p>

    <div id="lista-aniversariantes"></div>

    <footer>
        ©Amarildo, 2018-2026<br>
        Atualizado: 27/01/2026
    </footer>
</div>

<script>
const dadosBrutos = `INGRID GRAZIELA FERNANDES ANERÃO, *06/01/1997, ingrid.jpg
MARIA AMARILZA ANERÃO, *14/01/1969, amarilza.jpg
SANDRA REGINA MOLLER DE CAMPOS, *22/01/1964, 20/07/2020, sandra.jpg
ROSA FRACHELLI ANERÃO, *01/02/1901, 15/01/1971, rosa_frachelli.jpg
BRAZ GESTICH, *03/02/1944, 08/05/2023, braz.jpg
HUMBERTO DONIZETE ANERÃO, *22/02/1961, 14/07/2021, humberto.png
PRISCILA TOLEDO RETI, *03/03/1990, priscila.jpg
VALERIA APARECIDA GESTICH, *07/03/1988, valeria.jpg
IRIA RIBEIRO ANERÃO, *23/03/1930, 10/01/1979, iria.jpg
ZULMIRA BORGES GESTICH, *25/03/1907, 19/09/1964, zulmira.JPG
NICOLAS MIGUEL ANERÃO FONSECA, *25/03/2014, nicolas.jpg
JOSÉ AMARILDO ANERÃO, *30/03/1963, amarildo.jpg
IVANIRA FERREIRA LIMA, *01/04/1973, ivanira.jpg
MARIA DE LOURDES MALAQUIAS GESTICH, *07/04/1955, maria_lourdes.jpg
ROSA APARECIDA ANERÃO DE JESUS, *08/04/1950, 20/09/2021, rosa_aparecida.jpg
AURORA RIBEIRO, *16/04/1946, aurora.jpg
ARLINDO FRANCISCO RIBEIRO, *16/04/1948, 24/10/2001, arlindo.jpg
DIONATAS WILLIAN DE SOUZA FONSECA, *18/04/1992, dionatas.jpg
CAROLINA GABRIELA FERNANDES ANERÃO, *04/05/1994, carolina.jpg
JOSÉ REGINALDO GESTICH, *29/05/1980, jose_reginaldo.jpg
KARINA KRISTINA LIMA ANERÃO, *30/05/1996, karina.jpg
GENÉSIO DE SOUZA, *11/06/1947, 08/02/2000, genesio.jpg
AMÉLIA ANERÃO DONEDA, *15/06/1926, 23/02/2020, amelia.png
JOÃO PAULO GESTICH, *19/06/1984, joao_paulo.jpg
JOÃO GESTICH, *24/06/1895, 04/05/1980, joao_gestich.jpg
LEONOR OLIVEIRA DE SOUZA, *29/06/1951, 21/03/2019, leonor.jpg
GUILHERME GABRIEL FERNANDES ANERÃO, *06/07/2009, guilherme.jpg
ELIAS GESTICH, *27/07/1948, elias.jpg
ANTONIO FERNANDES DE LIMA, *18/08/1943, 28/02/2019, Antonio_lima.jpg
JOÃO ANERÃO, *24/08/1924, 30/01/2007, joao_anerao.png
JOSÉ ANERÃO, *25/08/1889, 11/08/1976, jose_anerao.jpg
LAURA RACHEL DIAS LINS ANERÃO, *05/09/1982, laura.jpg
APARECIDA ORDÁLIA GARCIA DE LIMA, *07/09/1943, aparecida.jpg
MARIA CRISTINA ANERÃO, *10/09/1941, 12/03/2023, cristina.jpg
LEANDRO HENRIQUE DE LIMA NETO, *29/09/1990, leandro.jpg
PAULO DE ASSIS ANERÃO, *18/10/1962, paulo.jpg
ANTONIO AMAURI ANERÃO, *19/10/1965, amauri.jpg
SONIA REGINA MOLLER, *21/10/1975, 10/10/2019, sonia.jpg
ANTONIO AMAURI ANERÃO JUNIOR, *24/10/1991, amauri_jr.jpg
SOLAMITA FERNANDES DE LIMA, *30/10/1972, solamita.jpg
VICENTE GESTICH, *13/11/1938, 27/05/2022, vicente.jpg
LUIZ FERNANDO LIMA ANERÃO, *27/11/2005, luiz.jpg
ARVELINO ANERÃO, *29/11/1937, 02/07/2007, arvelino.png
SANDRO FERNANDES DE LIMA, *29/11/1974, 23/12/2016, sandro.jpg
ANTONIO GESTICH, *02/12/1951, antonio_gestich.jpg
ROSA LIA ANERÃO MOLLER, *15/12/1943, rosalina.jpg
RITA DE CÁSSIA RIBEIRO, *18/12/1974, rita.jpg
REGINA APARECIDA RIBEIRO, *21/12/1971, regina.jpg
NATAL DO MENINO JESUS (25/12), jesus.jpg`;

const mesesNomes = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];

function getSigno(dia, mes) {
    const signos = [
        { s: "♑ Capricórnio", d: 20 }, { s: "♒ Aquário", d: 18 }, { s: "♓ Peixes", d: 20 },
        { s: "♈ Áries", d: 19 }, { s: "♉ Touro", d: 20 }, { s: "♊ Gêmeos", d: 20 },
        { s: "♋ Câncer", d: 22 }, { s: "♌ Leão", d: 22 }, { s: "♍ Virgem", d: 22 },
        { s: "♎ Libra", d: 22 }, { s: "♏ Escorpião", d: 21 }, { s: "♐ Sagitário", d: 21 },
        { s: "♑ Capricórnio", d: 31 }
    ];
    return dia > signos[mes-1].d ? signos[mes].s : signos[mes-1].s;
}

function processarDados() {
    const linhas = dadosBrutos.trim().split('\n');
    let pessoas = linhas.map(linha => {
        const partes = linha.split(',').map(p => p.trim());
        
        if(partes[0].includes("NATAL")) {
            return { nome: partes[0], foto: partes[1], especial: true, mes: 12, dia: 25 };
        }

        const nome = partes[0];
        const nascStr = partes[1].replace('*', '');
        const temFalec = partes.length === 4;
        const falecStr = temFalec ? partes[2] : null;
        const foto = temFalec ? partes[3] : partes[2];

        const [dN, mN, aN] = nascStr.split('/').map(Number);
        const dataNasc = new Date(aN, mN - 1, dN);
        
        let idade, anosFalecimento = null;
        const hoje = new Date();
        const refData = temFalec ? new Date(falecStr.split('/')[2], falecStr.split('/')[1]-1, falecStr.split('/')[0]) : hoje;

        idade = refData.getFullYear() - dataNasc.getFullYear();
        if (refData.getMonth() < dataNasc.getMonth() || (refData.getMonth() === dataNasc.getMonth() && refData.getDate() < dataNasc.getDate())) {
            idade--;
        }

        if(temFalec) {
            anosFalecimento = hoje.getFullYear() - refData.getFullYear();
            if (hoje.getMonth() < refData.getMonth() || (hoje.getMonth() === refData.getMonth() && hoje.getDate() < refData.getDate())) {
                anosFalecimento--;
            }
        }

        return { 
            nome, nascStr, falecStr, foto, idade, anosFalecimento, 
            dia: dN, mes: mN, ano: aN, 
            signo: getSigno(dN, mN),
            isAniversario: dN === hoje.getDate() && mN === (hoje.getMonth() + 1)
        };
    });

    renderizar(pessoas);
}

function renderizar(lista, filtro = "") {
    const container = document.getElementById('lista-aniversariantes');
    container.innerHTML = "";
    let total = 0;

    const normalizar = (t) => t.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
    const termo = normalizar(filtro);

    for (let m = 1; m <= 12; m++) {
        let pessoasMes = lista.filter(p => p.mes === m).sort((a, b) => a.dia - b.dia);
        
        let htmlMes = "";
        pessoasMes.forEach(p => {
            const textoBusca = normalizar(`${p.nome} ${mesesNomes[m-1]} ${p.signo || ''}`);
            if (termo && !textoBusca.includes(termo)) return;

            total++;
            const nomeExibicao = filtro ? p.nome.replace(new RegExp(filtro, 'gi'), match => `<span class="highlight">${match}</span>`) : p.nome;

            if (p.especial) {
                htmlMes += `<div class="pessoa-card">
                    <img src="fotos/${p.foto}" class="foto-moldura">
                    <div class="nome">${nomeExibicao}</div>
                </div>`;
                return;
            }

            let infoAniv = "";
            if(p.isAniversario) {
                infoAniv = p.falecStr ? `<div class="piscante">Faria aniversário hoje!</div>` : `<div class="piscante">Parabéns, Feliz Aniversário!</div>`;
            }

            htmlMes += `
                <div class="pessoa-card">
                    <img src="fotos/${p.foto}" class="foto-moldura">
                    <div class="nome">${nomeExibicao}</div>
                    ${infoAniv}
                    <div class="nascimento">*${p.nascStr} (${p.idade} anos)</div>
                    ${p.falecStr ? `<div class="falecimento">† ${p.falecStr} (há ${p.anosFalecimento} anos)</div>` : ''}
                    <div class="signo">${p.signo}</div>
                </div>`;
        });

        if (htmlMes) {
            container.innerHTML += `<div class="mes-titulo">${mesesNomes[m-1]}</div>` + htmlMes;
        }
    }
    document.getElementById('total').innerText = total;
}

function filtrar() {
    const termo = document.getElementById('busca').value;
    processarDadosFiltro(termo);
}

function processarDadosFiltro(termo) {
    // Re-executa a lógica com o filtro para manter a integridade visual
    const linhas = dadosBrutos.trim().split('\n');
    // ... (A lógica de renderizar já cuida do filtro)
    renderizar(window.cachedPessoas, termo);
}

// Inicialização
window.onload = () => {
    // Cache para não reprocessar strings toda hora
    const linhas = dadosBrutos.trim().split('\n');
    window.cachedPessoas = linhas.map(linha => {
        const partes = linha.split(',').map(p => p.trim());
        if(partes[0].includes("NATAL")) return { nome: partes[0], foto: partes[1], especial: true, mes: 12, dia: 25 };
        
        const [dN, mN, aN] = partes[1].replace('*', '').split('/').map(Number);
        const temFalec = partes.length === 4;
        const falecStr = temFalec ? partes[2] : null;
        const foto = temFalec ? partes[3] : partes[2];
        const hoje = new Date();
        const refData = temFalec ? new Date(falecStr.split('/')[2], falecStr.split('/')[1]-1, falecStr.split('/')[0]) : hoje;

        let idade = refData.getFullYear() - aN;
        if (refData.getMonth() < (mN-1) || (refData.getMonth() === (mN-1) && refData.getDate() < dN)) idade--;

        let anosFalec = null;
        if(temFalec) {
            anosFalec = hoje.getFullYear() - refData.getFullYear();
            if (hoje.getMonth() < refData.getMonth() || (hoje.getMonth() === refData.getMonth() && hoje.getDate() < refData.getDate())) anosFalec--;
        }

        return { 
            nome: partes[0], nascStr: partes[1].replace('*',''), falecStr, foto, 
            idade, anosFalecimento: anosFalec, dia: dN, mes: mN, signo: getSigno(dN, mN),
            isAniversario: dN === hoje.getDate() && mN === (hoje.getMonth()+1)
        };
    });
    renderizar(window.cachedPessoas);
};
</script>

</body>
</html>
