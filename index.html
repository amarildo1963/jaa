<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aniversariantes - Memorial</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f4f4f4; text-align: center; margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        
        /* Busca */
        #search-box { width: 90%; padding: 10px; margin-bottom: 20px; border: 1px solid #ccc; border-radius: 5px; font-size: 16px; }
        
        /* Meses */
        .mes-titulo { color: red; font-weight: bold; text-transform: uppercase; border-bottom: 2px solid red; margin-top: 30px; padding-bottom: 5px; }
        
        /* Cartão de Pessoa */
        .pessoa-card { margin-bottom: 30px; display: flex; flex-direction: column; align-items: center; }
        
        .foto-moldura {
            width: 150px; height: 150px;
            border-radius: 50%;
            border: 5px solid gold;
            overflow: hidden;
            margin-bottom: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .foto-moldura img { width: 100%; height: 100%; object-fit: cover; }
        
        .nome { color: blue; font-weight: bold; font-size: 1.2em; margin: 5px 0; }
        .data-nasc { color: green; font-weight: bold; margin: 2px 0; }
        .data-falec { color: #aaaaaa; font-size: 0.9em; margin: 2px 0; }
        .info-idade { font-size: 0.9em; color: #555; margin-bottom: 5px; }
        .signo { font-size: 1.1em; margin-top: 5px; }
        
        /* Efeito Piscante */
        .piscante {
            color: red; font-weight: bold;
            animation: blink 1s linear infinite;
            margin-top: 5px;
        }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }

        /* Destaque da busca */
        mark { background: yellow; color: black; }
        
        .total-registros { font-weight: bold; margin-bottom: 15px; }
        footer { margin-top: 40px; font-size: 0.8em; color: #777; }
    </style>
</head>
<body>

<div class="container">
    <h2>ANIVERSARIANTES</h2>
    
    <input type="text" id="search-box" placeholder="Busque por nome, mês ou signo..." onkeyup="renderizar()">
    
    <div id="total" class="total-registros"></div>
    <div id="lista-aniversariantes"></div>

    <footer>
        ©Amarildo, 2018-2026<br>
        Atualizado: 27/01/2026
    </footer>
</div>

<script>
    // Dados Brutos
    const dadosBrutos = [
        ["INGRID GRAZIELA FERNANDES ANERÃO", "06/01/1997", null, "ingrid.jpg"],
        ["MARIA AMARILZA ANERÃO", "14/01/1969", null, "amarilza.jpg"],
        ["SANDRA REGINA MOLLER DE CAMPOS", "22/01/1964", "20/07/2020", "sandra.jpg"],
        ["ROSA FRACHELLI ANERÃO", "01/02/1901", "15/01/1971", "rosa_frachelli.jpg"],
        ["BRAZ GESTICH", "03/02/1944", "08/05/2023", "braz.jpg"],
        ["HUMBERTO DONIZETE ANERÃO", "22/02/1961", "14/07/2021", "humberto.png"],
        ["PRISCILA TOLEDO RETTI", "03/03/1990", null, "priscila.jpg"],
        ["VALERIA APARECIDA GESTICH", "07/03/1988", null, "valeria.jpg"],
        ["IRIA RIBEIRO ANERÃO", "23/03/1930", "10/01/1979", "iria.jpg"],
        ["ZULMIRA BORGES GESTICH", "25/03/1907", "19/09/1964", "zulmira.JPG"],
        ["NICOLAS MIGUEL ANERÃO FONSECA", "25/03/2014", null, "nicolas.jpg"],
        ["JOSÉ AMARILDO ANERÃO", "30/03/1963", null, "amarildo.jpg"],
        ["IVANIRA FERREIRA LIMA", "01/04/1973", null, "ivanira.jpg"],
        ["MARIA DE LOURDES MALAQUIAS GESTICH", "07/04/1955", null, "maria_lourdes.jpg"],
        ["ROSA APARECIDA ANERÃO DE JESUS", "08/04/1950", "20/09/2021", "rosa_aparecida.jpg"],
        ["AURORA RIBEIRO", "16/04/1946", null, "aurora.jpg"],
        ["ARLINDO FRANCISCO RIBEIRO", "16/04/1948", "24/10/2001", "arlindo.jpg"],
        ["DIONATAS WILLIAN DE SOUZA FONSECA", "18/04/1992", null, "dionatas.jpg"],
        ["CAROLINA GABRIELA FERNANDES ANERÃO", "04/05/1994", null, "carolina.jpg"],
        ["JOSÉ REGINALDO GESTICH", "29/05/1980", null, "jose_reginaldo.jpg"],
        ["KARINA KRISTINA LIMA ANERÃO", "30/05/1996", null, "karina.jpg"],
        ["GENÉSIO DE SOUZA", "11/06/1947", "08/02/2000", "genesio.jpg"],
        ["AMÉLIA ANERÃO DONEDA", "15/06/1926", "23/02/2020", "amelia.png"],
        ["JOÃO PAULO GESTICH", "19/06/1984", null, "joao_paulo.jpg"],
        ["JOÃO GESTICH", "24/06/1895", "04/05/1980", "joao_gestich.jpg"],
        ["LEONOR OLIVEIRA DE SOUZA", "29/06/1951", "21/03/2019", "leonor.jpg"],
        ["GUILHERME GABRIEL FERNANDES ANERÃO", "06/07/2009", null, "guilherme.jpg"],
        ["ELIAS GESTICH", "27/07/1948", null, "elias.jpg"],
        ["ANTONIO FERNANDES DE LIMA", "18/08/1943", "28/02/2019", "Antonio_lima.jpg"],
        ["JOÃO ANERÃO", "24/08/1924", "30/01/2007", "joao_anerao.png"],
        ["JOSÉ ANERÃO", "25/08/1889", "11/08/1976", "jose_anerao.jpg"],
        ["LAURA RACHEL DIAS LINS ANERÃO", "05/09/1982", null, "laura.jpg"],
        ["APARECIDA ORDÁLIA GARCIA DE LIMA", "07/09/1943", null, "aparecida.jpg"],
        ["MARIA CRISTINA ANERÃO", "10/09/1941", "12/03/2023", "cristina.jpg"],
        ["LEANDRO HENRIQUE DE LIMA NETO", "29/09/1990", null, "leandro.jpg"],
        ["PAULO DE ASSIS ANERÃO", "18/10/1962", null, "paulo.jpg"],
        ["ANTONIO AMAURI ANERÃO", "19/10/1965", null, "amauri.jpg"],
        ["SONIA REGINA MOLLER", "21/10/1975", "10/10/2019", "sonia.jpg"],
        ["ANTONIO AMAURI ANERÃO JUNIOR", "24/10/1991", null, "amauri_jr.jpg"],
        ["SOLAMITA FERNANDES DE LIMA", "30/10/1972", null, "solamita.jpg"],
        ["VICENTE GESTICH", "13/11/1938", "27/05/2022", "vicente.jpg"],
        ["LUIZ FERNANDO LIMA ANERÃO", "27/11/2005", null, "luiz.jpg"],
        ["ARVELINO ANERÃO", "29/11/1937", "02/07/2007", "arvelino.png"],
        ["SANDRO FERNANDES DE LIMA", "29/11/1974", "23/12/2016", "sandro.jpg"],
        ["ANTONIO GESTICH", "02/12/1951", null, "antonio_gestich.jpg"],
        ["ROSA LIA ANERÃO MOLLER", "15/12/1943", null, "rosalina.jpg"],
        ["RITA DE CÁSSIA RIBEIRO", "18/12/1974", null, "rita.jpg"],
        ["REGINA APARECIDA RIBEIRO", "21/12/1971", null, "regina.jpg"],
        ["NATAL DO MENINO JESUS (25/12)", "25/12/0000", null, "jesus.jpg"]
    ];

    const mesesNomes = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];

    function getSigno(dia, mes) {
        const signos = [
            { n: "Capricórnio", s: "♑", d: 20, m: 1 }, { n: "Aquário", s: "♒", d: 18, m: 2 },
            { n: "Peixes", s: "♓", d: 20, m: 3 }, { n: "Áries", s: "♈", d: 20, m: 4 },
            { n: "Touro", s: "♉", d: 20, m: 5 }, { n: "Gêmeos", s: "♊", d: 20, m: 6 },
            { n: "Câncer", s: "♋", d: 22, m: 7 }, { n: "Leão", s: "♌", d: 22, m: 8 },
            { n: "Virgem", s: "♍", d: 22, m: 9 }, { n: "Libra", s: "♎", d: 22, m: 10 },
            { n: "Escorpião", s: "♏", d: 21, m: 11 }, { n: "Sagitário", s: "♐", d: 21, m: 12 }
        ];
        const res = signos.find(sig => (mes < sig.m) || (mes === sig.m && dia <= sig.d));
        return res ? res : { n: "Capricórnio", s: "♑" };
    }

    function removerAcentos(str) {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
    }

    function calcularDiferenca(dnasc, dfalec) {
        let anos = dfalec.getFullYear() - dnasc.getFullYear();
        if (dfalec.getMonth() < dnasc.getMonth() || (dfalec.getMonth() === dnasc.getMonth() && dfalec.getDate() < dnasc.getDate())) {
            anos--;
        }
        return anos;
    }

    function renderizar() {
        const busca = removerAcentos(document.getElementById('search-box').value);
        const listaDiv = document.getElementById('lista-aniversariantes');
        listaDiv.innerHTML = "";
        
        let hoje = new Date(2026, 0, 27); // Data do sistema conforme instrução
        let total = 0;

        // Agrupar por mês
        const grupos = Array.from({length: 12}, () => []);
        
        dadosBrutos.forEach(p => {
            const [nome, nascStr, falecStr, foto] = p;
            const partesNasc = nascStr.split('/');
            const diaN = parseInt(partesNasc[0]);
            const mesN = parseInt(partesNasc[1]);
            const anoN = parseInt(partesNasc[2]);
            
            const signoObj = getSigno(diaN, mesN);
            const mesNome = mesesNomes[mesN - 1];
            
            const textoParaBusca = removerAcentos(nome + mesNome + signoObj.n);
            if (textoParaBusca.includes(busca)) {
                grupos[mesN - 1].push({ nome, nascStr, falecStr, foto, diaN, mesN, anoN, signoObj });
                total++;
            }
        });

        document.getElementById('total').innerText = `Total de Registros: ${total}`;

        grupos.forEach((pessoas, index) => {
            if (pessoas.length === 0) return;

            const mesTitulo = document.createElement('div');
            mesTitulo.className = 'mes-titulo';
            mesTitulo.innerText = mesesNomes[index];
            listaDiv.appendChild(mesTitulo);

            // Ordenar por dia de nascimento
            pessoas.sort((a, b) => a.diaN - b.diaN);

            pessoas.forEach(p => {
                const card = document.createElement('div');
                card.className = 'pessoa-card';

                const dNasc = new Date(p.anoN, p.mesN - 1, p.diaN);
                const isNatal = p.nome.includes("NATAL");

                // Highlight de busca no nome
                let nomeExibicao = p.nome;
                if (busca !== "") {
                    const regex = new RegExp(`(${busca})`, 'gi');
                    nomeExibicao = nomeExibicao.replace(regex, '<mark>$1</mark>');
                }

                let html = `
                    <div class="foto-moldura"><img src="fotos/${p.foto}" alt="${p.nome}"></div>
                    <div class="nome">${nomeExibicao}</div>
                `;

                if (!isNatal) {
                    let idadeTexto = "";
                    let falecimentoTexto = "";
                    
                    if (p.falecStr) {
                        const partesF = p.falecStr.split('/');
                        const dFalec = new Date(parseInt(partesF[2]), parseInt(partesF[1]) - 1, parseInt(partesF[0]));
                        const idadeMorte = calcularDiferenca(dNasc, dFalec);
                        const anosFalecimento = calcularDiferenca(dFalec, hoje);
                        
                        idadeTexto = `Faleceu com ${idadeMorte} anos`;
                        falecimentoTexto = `<div class="data-falec">† ${p.falecStr} (há ${anosFalecimento} anos)</div>`;
                    } else {
                        idadeTexto = `${calcularDiferenca(dNasc, hoje)} anos`;
                    }

                    html += `
                        <div class="data-nasc">*${p.nascStr}</div>
                        ${falecimentoTexto}
                        <div class="info-idade">${idadeTexto}</div>
                        <div class="signo">${p.signoObj.s} ${p.signoObj.n}</div>
                    `;

                    // Verificação de aniversário hoje (27/01/2026)
                    if (p.diaN === hoje.getDate() && p.mesN === (hoje.getMonth() + 1)) {
                        const msg = p.falecStr ? "Faria aniversário hoje!" : "Parabéns, Feliz Aniversário!";
                        html += `<div class="piscante">${msg}</div>`;
                    }
                }

                card.innerHTML = html;
                listaDiv.appendChild(card);
            });
        });
    }

    // Inicializar
    window.onload = renderizar;
</script>

</body>
</html>
