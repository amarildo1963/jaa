<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aniversariantes - Fam√≠lia</title>
    <style>
        :root {
            --azul: #0000FF;
            --verde: #008000;
            --vermelho: #FF0000;
            --cinza: #808080;
            --dourado: #D4AF37;
        }

        body { font-family: Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 20px; }
        
        .container { max-width: 1200px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        
        h2 { text-align: center; color: #333; border-bottom: 2px solid var(--azul); padding-bottom: 10px; }

        /* Busca */
        .search-container { margin-bottom: 20px; background: #eee; padding: 15px; border-radius: 5px; }
        input[type="text"] { width: 100%; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }

        /* Painel de Pr√≥ximos Aniversariantes */
        .painel-proximos { background: #fff3cd; border: 1px solid #ffeeba; padding: 15px; margin-bottom: 20px; border-radius: 5px; }
        .painel-proximos h3 { margin-top: 0; font-size: 1.1em; color: #856404; }

        /* Grid de Cards */
        .grid-aniversariantes { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        
        .card { border: 1px solid #ddd; padding: 15px; border-radius: 10px; text-align: center; position: relative; background: #fff; }
        
        .moldura { 
            width: 120px; height: 120px; border: 4px solid var(--dourado); border-radius: 50%; 
            margin: 0 auto 10px; overflow: hidden; display: flex; align-items: center; justify-content: center;
        }
        .moldura img { width: 100%; height: 100%; object-fit: cover; }

        .nome { color: var(--azul); font-weight: bold; font-size: 1.1em; display: block; margin-bottom: 5px; }
        .data-nasc { color: var(--verde); font-weight: bold; font-size: 0.9em; }
        .data-falec { color: var(--cinza); font-size: 0.85em; display: block; }
        .idade { color: var(--vermelho); font-weight: bold; display: block; margin: 5px 0; }
        .signo { font-size: 0.85em; font-style: italic; color: #555; }
        
        .destaque-busca { background-color: yellow; }
        
        .piscante {
            color: var(--vermelho); font-weight: bold;
            animation: piscar 1s infinite;
        }

        @keyframes piscar { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }

        footer { text-align: center; margin-top: 40px; font-size: 0.8em; color: #666; border-top: 1px solid #ccc; padding-top: 10px; }

        /* Responsividade */
        @media (max-width: 600px) { .grid-aniversariantes { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="container">
    <h2>ANIVERSARIANTES</h2>
    
    <div class="search-container">
        <label>Filtrar Registros (Nome, M√™s ou Signo):</label>
        <input type="text" id="inputBusca" placeholder="Ex: Mar√ßo, √Åries, Ingrid...">
        <p>Total de Registros: <span id="totalRegistros">0</span></p>
    </div>

    <div id="painelProximos" class="painel-proximos" style="display:none;">
        <h3>üéÇ Pr√≥ximos 30 dias / Hoje</h3>
        <div id="listaProximos"></div>
    </div>

    <div id="listaGeral" class="grid-aniversariantes"></div>

    <footer>
        ¬©Amarildo, 2016-2026<br>
        Atualizado: 01/02/2026
    </footer>
</div>

<script>
const BASE_URL_FOTOS = "https://amarildo1963.github.io/jaa/fotos/";

const dadosBrutos = `INGRID GRAZIELA FERNANDES ANER√ÉO,*06/01/1997,ingrid.jpg
MARIA AMARILZA ANER√ÉO,*14/01/1969,amarilza.jpg
SANDRA REGINA MOLLER DE CAMPOS,*22/01/1964,+20/07/2020,sandra.jpg
ROSA FRACHELLI ANER√ÉO,*01/02/1901,+15/01/1971,rosa_frachelli.jpg
BRAZ GESTICH,*03/02/1944,+08/05/2023,braz.jpg
HUMBERTO DONIZETE ANER√ÉO,*22/02/1961,+14/07/2021,humberto.png
PRISCILA TOLEDO RETI,*03/03/1990,priscila.jpg                                                    
VALERIA APARECIDA GESTICH,*07/03/1988,valeria.jpg
IRIA RIBEIRO ANER√ÉO,*23/03/1930,+10/01/1979,iria.jpg
ZULMIRA BORGES GESTICH,*25/03/1907,+19/09/1964,zulmira.JPG
NICOLAS MIGUEL ANER√ÉO FONSECA,*25/03/2014,nicolas.jpg
JOS√â AMARILDO ANER√ÉO,*30/03/1963,amarildo.jpg
IVANIRA FERREIRA LIMA,*01/04/1973,ivanira.jpg
MARIA DE LOURDES MALAQUIAS GESTICH,*07/04/1955,maria_lourdes.jpg
ROSA APARECIDA ANER√ÉO DE JESUS,*08/04/1950,+20/09/2021,rosa_aparecida.jpg
AURORA RIBEIRO,*16/04/1946,aurora.jpg
ARLINDO FRANCISCO RIBEIRO,*16/04/1948,+24/10/2001,arlindo.jpg
DIONATAS WILLIAN DE SOUZA FONSECA,*18/04/1992,dionatas.jpg
CAROLINA GABRIELA FERNANDES ANER√ÉO,*04/05/1994,carolina.jpg
JOS√â REGINALDO GESTICH,*29/05/1980,jose_reginaldo.jpg
KARINA KRISTINA LIMA ANER√ÉO,*30/05/1996,karina.jpg
GEN√âSIO DE SOUZA,*11/06/1947,+08/02/2000,genesio.jpg
AM√âLIA ANER√ÉO DONEDA,*15/06/1926,+23/02/2020,amelia.png
JO√ÉO PAULO GESTICH,*19/06/1984,joao_paulo.jpg
JO√ÉO GESTICH,*24/06/1895,+04/05/1980,joao_gestich.jpg
LEONOR OLIVEIRA DE SOUZA,*29/06/1951,+21/03/2019,leonor.jpg
GUILHERME GABRIEL FERNANDES ANER√ÉO,*06/07/2009,guilherme.jpg
ELIAS GESTICH,*27/07/1948,elias.jpg
ANTONIO FERNANDES DE LIMA,*18/08/1943,+28/02/2019,Antonio_lima.jpg
JO√ÉO ANER√ÉO,*24/08/1924,+30/01/2007,joao_anerao.png
JOS√â ANER√ÉO,*25/08/1889,+11/08/1976,jose_anerao.jpg
LAURA RACHEL DIAS LINS ANER√ÉO,*05/09/1982,laura.jpg
APARECIDA ORD√ÅLIA GARCIA DE LIMA,*07/09/1943,aparecida.jpg
MARIA CRISTINA ANER√ÉO,*10/09/1941,+12/03/2023,cristina.jpg
LEANDRO HENRIQUE DE LIMA NETO,*29/09/1990,leandro.jpg
PAULO DE ASSIS ANER√ÉO,*18/10/1962,paulo.jpg
ANTONIO AMAURI ANER√ÉO,*19/10/1965,amauri.jpg
SONIA REGINA MOLLER,*21/10/1975,+10/10/2019,sonia.jpg
ANTONIO AMAURI ANER√ÉO JUNIOR,*24/10/1991,amauri_jr.jpg
SOLAMITA FERNANDES DE LIMA,*30/10/1972,solamita.jpg
VICENTE GESTICH,*13/11/1938,+27/05/2022,vicente.jpg
LUIZ FERNANDO LIMA ANER√ÉO,*27/11/2005,luiz.jpg
ARVELINO ANER√ÉO,*29/11/1937,+02/07/2007,arvelino.png
SANDRO FERNANDES DE LIMA,*29/11/1974,+23/12/2016,sandro.jpg
ANTONIO GESTICH,*02/12/1951,antonio_gestich.jpg
ROSA LIA ANER√ÉO MOLLER,*15/12/1943,rosalina.jpg
RITA DE C√ÅSSIA RIBEIRO,*18/12/1974,rita.jpg
REGINA APARECIDA RIBEIRO,*21/12/1971,regina.jpg
NATAL DO MENINO JESUS (25/12),jesus.jpg`;

function normalizarTexto(txt) {
    return txt.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
}

function parseData(str) {
    if (!str) return null;
    const [d, m, y] = str.replace(/[^\d/]/g, '').split('/');
    return new Date(y, m - 1, d);
}

function getSigno(dia, mes) {
    const signos = [
        { nome: "Capric√≥rnio", simbolo: "‚ôë", fim: [20, 1] }, { nome: "Aqu√°rio", simbolo: "‚ôí", fim: [18, 2] },
        { nome: "Peixes", simbolo: "‚ôì", fim: [20, 3] }, { nome: "√Åries", simbolo: "‚ôà", fim: [20, 4] },
        { nome: "Touro", simbolo: "‚ôâ", fim: [20, 5] }, { nome: "G√™meos", simbolo: "‚ôä", fim: [20, 6] },
        { nome: "C√¢ncer", simbolo: "‚ôã", fim: [22, 7] }, { nome: "Le√£o", simbolo: "‚ôå", fim: [22, 8] },
        { nome: "Virgem", simbolo: "‚ôç", fim: [22, 9] }, { nome: "Libra", simbolo: "‚ôé", fim: [22, 10] },
        { nome: "Escorpi√£o", simbolo: "‚ôè", fim: [21, 11] }, { nome: "Sagit√°rio", simbolo: "‚ôê", fim: [21, 12] },
        { nome: "Capric√≥rnio", simbolo: "‚ôë", fim: [31, 12] }
    ];
    return signos.find(s => (mes < s.fim[1]) || (mes === s.fim[1] && dia <= s.fim[0])) || signos[0];
}

const mesesNomes = ["Janeiro", "Fevereiro", "Mar√ßo", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];

function processarDados() {
    const linhas = dadosBrutos.split('\n').filter(l => l.trim() !== "");
    const pessoas = linhas.map(linha => {
        const partes = linha.split(',');
        const nome = partes[0].trim();
        const foto = partes[partes.length - 1].trim();
        
        if(nome.includes("NATAL")) return { natal: true, nome, foto };

        let nasc = null, falec = null;
        partes.forEach(p => {
            if(p.includes('*')) nasc = parseData(p);
            if(p.includes('+')) falec = parseData(p);
        });

        const hj = new Date();
        let idade;
        const refMorte = falec || hj;
        
        idade = refMorte.getFullYear() - nasc.getFullYear();
        const m = refMorte.getMonth() - nasc.getMonth();
        if (m < 0 || (m === 0 && refMorte.getDate() < nasc.getDate())) idade--;

        let tempoFalecimento = "";
        if(falec) {
            let anosF = hj.getFullYear() - falec.getFullYear();
            const mf = hj.getMonth() - falec.getMonth();
            if (mf < 0 || (mf === 0 && hj.getDate() < falec.getDate())) anosF--;
            tempoFalecimento = `${anosF} anos do falecimento`;
        }

        return { 
            nome, nasc, falec, foto, idade, 
            tempoFalecimento, 
            signo: getSigno(nasc.getDate(), nasc.getMonth() + 1),
            mesNasc: nasc.getMonth()
        };
    });

    renderizar(pessoas);
}

function renderizar(pessoas, filtro = "") {
    const listaGeral = document.getElementById('listaGeral');
    const listaProximos = document.getElementById('listaProximos');
    const painelProximos = document.getElementById('painelProximos');
    const totalSpan = document.getElementById('totalRegistros');
    
    listaGeral.innerHTML = "";
    listaProximos.innerHTML = "";
    let count = 0;
    const hj = new Date();
    const termo = normalizarTexto(filtro);

    // Ordenar por m√™s e dia
    pessoas.sort((a, b) => {
        if(a.natal || b.natal) return 0;
        return a.nasc.getMonth() - b.nasc.getMonth() || a.nasc.getDate() - b.nasc.getDate();
    });

    pessoas.forEach(p => {
        if(p.natal) {
            listaGeral.innerHTML += `<div class="card">
                <div class="moldura"><img src="${BASE_URL_FOTOS}${p.foto}"></div>
                <span class="nome">${p.nome}</span>
            </div>`;
            return;
        }

        const dataNascFormat = `${p.nasc.getDate().toString().padStart(2,'0')}/${(p.nasc.getMonth()+1).toString().padStart(2,'0')}/${p.nasc.getFullYear()}`;
        const dataFalecFormat = p.falec ? `${p.falec.getDate().toString().padStart(2,'0')}/${(p.falec.getMonth()+1).toString().padStart(2,'0')}/${p.falec.getFullYear()}` : "";
        
        const stringBusca = normalizarTexto(p.nome + mesesNomes[p.mesNasc] + p.signo.nome);
        if(filtro && !stringBusca.includes(termo)) return;
        count++;

        const isAniversarianteHoje = hj.getDate() === p.nasc.getDate() && hj.getMonth() === p.nasc.getMonth();
        
        // L√≥gica de destaque da busca
        let nomeExibicao = p.nome;
        if(filtro) {
            const regex = new RegExp(`(${filtro})`, "gi");
            nomeExibicao = p.nome.replace(regex, `<span class="destaque-busca">$1</span>`);
        }

        const cardHtml = `
            <div class="card">
                <div class="moldura"><img src="${BASE_URL_FOTOS}${p.foto}" onerror="this.src='https://via.placeholder.com'"></div>
                <span class="nome" style="color:var(--azul); font-weight:bold;">${nomeExibicao}</span>
                <span class="data-nasc" style="color:var(--verde); font-weight:bold;">*${dataNascFormat}</span>
                ${p.falec ? `<span class="data-falec" style="color:var(--cinza);">‚úù ${dataFalecFormat} (${p.tempoFalecimento})</span>` : ''}
                <span class="idade" style="color:var(--vermelho); font-weight:bold;">${p.idade} anos</span>
                <div class="signo">${p.signo.simbolo} ${p.signo.nome}</div>
                ${isAniversarianteHoje ? `<div class="piscante">${p.falec ? 'Faria anivers√°rio hoje!' : 'Parab√©ns, Feliz Anivers√°rio!'}</div>` : ''}
            </div>
        `;

        listaGeral.innerHTML += cardHtml;

        // Pr√≥ximos 30 dias
        const proxNasc = new Date(hj.getFullYear(), p.nasc.getMonth(), p.nasc.getDate());
        if(proxNasc < hj && (hj.getDate() !== p.nasc.getDate() || hj.getMonth() !== p.nasc.getMonth())) proxNasc.setFullYear(hj.getFullYear() + 1);
        
        const diffDias = Math.ceil((proxNasc - hj) / (1000 * 60 * 60 * 24));
        if(diffDias <= 30 || isAniversarianteHoje) {
            listaProximos.innerHTML += `<li><strong>${p.nome}</strong> - ${p.nasc.getDate()}/${p.nasc.getMonth()+1} (${p.falec ? 'Faria' : 'Faz'} ${p.idade + (isAniversarianteHoje ? 0 : 1)} anos)</li>`;
        }
    });

    totalSpan.innerText = count;
    painelProximos.style.display = listaProximos.innerHTML ? 'block' : 'none';
}

document.getElementById('inputBusca').addEventListener('input', (e) => {
    processarDados(); // Recalcula e renderiza com o filtro
    renderizar(window.basePessoas, e.target.value);
});

// Inicializa√ß√£o
const linhas = dadosBrutos.split('\n').filter(l => l.trim() !== "");
window.basePessoas = linhas.map(linha => {
    const partes = linha.split(',');
    const nome = partes[0].trim();
    const foto = partes[partes.length - 1].trim();
    if(nome.includes("NATAL")) return { natal: true, nome, foto };

    let nasc = null, falec = null;
    partes.forEach(p => {
        if(p.includes('*')) nasc = parseData(p.trim());
        if(p.includes('+')) falec = parseData(p.trim());
    });

    const hj = new Date();
    const refMorte = falec || hj;
    let idade = refMorte.getFullYear() - nasc.getFullYear();
    if (refMorte.getMonth() < nasc.getMonth() || (refMorte.getMonth() === nasc.getMonth() && refMorte.getDate() < nasc.getDate())) idade--;

    let tempoFalecimento = "";
    if(falec) {
        let anosF = hj.getFullYear() - falec.getFullYear();
        if (hj.getMonth() < falec.getMonth() || (hj.getMonth() === falec.getMonth() && hj.getDate() < falec.getDate())) anosF--;
        tempoFalecimento = `${anosF} anos`;
    }

    return { 
        nome, nasc, falec, foto, idade, tempoFalecimento,
        signo: getSigno(nasc.getDate(), nasc.getMonth() + 1),
        mesNasc: nasc.getMonth()
    };
});

renderizar(window.basePessoas);
</script>
</body>
</html>
