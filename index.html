<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aniversariantes - Família Anerão</title>
    <style>
        :root {
            --azul: #0000FF;
            --verde: #008000;
            --marrom: #8B4513;
            --vermelho: #FF0000;
            --dourado: #FFD700;
        }

        body { font-family: sans-serif; text-align: center; background-color: #f4f4f4; padding: 20px; }
        
        .container { max-width: 1000px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }

        h2 { color: var(--vermelho); }

        /* Filtros e Busca */
        .controles { margin-bottom: 20px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
        input[type="text"] { padding: 10px; width: 80%; max-width: 400px; border-radius: 5px; border: 1px solid #ccc; }
        
        /* Botões 3D */
        .btn {
            padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;
            font-weight: bold; color: white; text-transform: uppercase;
            box-shadow: 0 5px #999; transition: 0.2s; margin: 5px;
        }
        .btn:active { box-shadow: 0 2px #666; transform: translateY(3px); }
        .btn-blue { background-color: #3498db; }
        .btn-red { background-color: #e74c3c; }
        .btn-green { background-color: #2ecc71; }
        .btn-orange { background-color: #f39c12; }

        .estatisticas { font-weight: bold; margin: 15px 0; }
        .highlight { background-color: yellow; }

        /* Grade de Pessoas */
        .mes-secao { margin-top: 30px; border-top: 2px solid #eee; }
        .mes-titulo { color: var(--vermelho); font-weight: bold; font-size: 1.5em; margin: 20px 0; }
        
        .grid-pessoas { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
        .card { width: 220px; padding: 15px; border: 1px solid #ddd; border-radius: 10px; background: #fff; }

        .moldura {
            width: 120px; height: 120px; border: 5px solid var(--dourado);
            border-radius: 50%; overflow: hidden; margin: 0 auto 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }
        .moldura img { width: 100%; height: 100%; object-fit: cover; }

        .nome { color: var(--azul); font-weight: bold; font-size: 1.1em; display: block; }
        .data-nasc { color: var(--verde); font-weight: bold; }
        .idade { color: var(--verde); font-weight: bold; }
        .falecimento { color: var(--marrom); font-size: 0.9em; }
        .signo { font-size: 0.9em; color: #555; }

        .piscante {
            color: var(--vermelho); font-weight: bold;
            animation: pisca 0.8s infinite alternate;
        }
        @keyframes pisca { from { opacity: 1; } to { opacity: 0; } }

        footer { margin-top: 50px; font-size: 0.8em; color: #666; }
    </style>
</head>
<body>

<div class="container">
    <h2>ANIVERSARIANTES</h2>

    <div class="controles">
        <input type="text" id="busca" placeholder="Busque por nome, mês ou signo..." onkeyup="filtrar()">
        <br>
        <button class="btn btn-blue" onclick="resetarFiltros()">Todos</button>
        <button class="btn btn-red" onclick="limparInput()">Limpar Filtros</button>
        <button class="btn btn-orange" onclick="filtrarMes(-1)">Mês Anterior</button>
        <button class="btn btn-orange" onclick="filtrarMes(0)">Mês Atual</button>
        <button class="btn btn-orange" onclick="filtrarMes(1)">Próx. Mês</button>
        <button class="btn btn-green" onclick="filtrarStatus('vivos')">Vivos</button>
        <button class="btn btn-red" onclick="filtrarStatus('falecidos')">Falecidos</button>
    </div>

    <div class="estatisticas">
        Total registros: <span id="totalReg">0</span> | Filtrados: <span id="totalFilt">0</span>
    </div>

    <div id="lista-aniversariantes"></div>

    <footer>
        ©J.A.Anerão, 2016-2026<br>
        Atualizado: 03/02/2026
    </footer>
</div>

<script>
    const servidor = "https://amarildo1963.github.io/jaa/fotos/";
    const hoje = new Date();
    
    // Dados brutos (processados no init)
    const rawData = [
        "INGRID GRAZIELA FERNANDES ANERÃO,*06/01/1997,ingrid.jpg",
        "MARIA AMARILZA ANERÃO,*14/01/1969,amarilza.jpg",
        "SANDRA REGINA MOLLER DE CAMPOS,*22/01/1964,+20/07/2020,sandra.jpg",
        "ROSA FRACHELLI ANERÃO,*01/02/1901,+15/01/1971,rosa_frachelli.jpg",
        "BRAZ GESTICH,*03/02/1944,+08/05/2023,braz.jpg",
        "HUMBERTO DONIZETE ANERÃO,*22/02/1961,+14/07/2021,humberto.png",
        "PRISCILA TOLEDO RETI,*03/03/1990,priscila.jpg",
        "VALERIA APARECIDA GESTICH,*07/03/1988,valeria.jpg",
        "IRIA RIBEIRO ANERÃO,*23/03/1930,+10/01/1979,iria.jpg",
        "ZULMIRA BORGES GESTICH,*25/03/1907,+19/09/1964,zulmira.JPG",
        "NICOLAS MIGUEL ANERÃO FONSECA,*25/03/2014,nicolas.jpg",
        "JOSÉ AMARILDO ANERÃO,*30/03/1963,amarildo.jpg",
        "IVANIRA FERREIRA LIMA,*01/04/1973,ivanira.jpg",
        "MARIA DE LOURDES MALAQUIAS GESTICH,*07/04/1955,maria_lourdes.jpg",
        "ROSA APARECIDA ANERÃO DE JESUS,*08/04/1950,+20/09/2021,rosa_aparecida.jpg",
        "AURORA RIBEIRO,*16/04/1946,aurora.jpg",
        "ARLINDO FRANCISCO RIBEIRO,*16/04/1948,+24/10/2001,arlindo.jpg",
        "DIONATAS WILLIAN DE SOUZA FONSECA,*18/04/1992,dionatas.jpg",
        "CAROLINA GABRIELA FERNANDES ANERÃO,*04/05/1994,carolina.jpg",
        "JOSÉ REGINALDO GESTICH,*29/05/1980,jose_reginaldo.jpg",
        "KARINA KRISTINA LIMA ANERÃO,*30/05/1996,karina.jpg",
        "GENÉSIO DE SOUZA,*11/06/1947,+08/02/2000,genesio.jpg",
        "AMÉLIA ANERÃO DONEDA,*15/06/1926,+23/02/2020,amelia.png",
        "JOÃO PAULO GESTICH,*19/06/1984,joao_paulo.jpg",
        "JOÃO GESTICH,*24/06/1895,+04/05/1980,joao_gestich.jpg",
        "LEONOR OLIVEIRA DE SOUZA,*29/06/1951,+21/03/2019,leonor.jpg",
        "GUILHERME GABRIEL FERNANDES ANERÃO,*06/07/2009,guilherme.jpg",
        "ELIAS GESTICH,*27/07/1948,elias.jpg",
        "ANTONIO FERNANDES DE LIMA,*18/08/1943,+28/02/2019,antonio_lima.jpg",
        "JOÃO ANERÃO,*24/08/1924,+30/01/2007,joao_anerao.png",
        "JOSÉ ANERÃO,*25/08/1889,+11/08/1976,jose_anerao.jpg",
        "LAURA RACHEL DIAS LINS ANERÃO,*05/09/1982,laura.jpg",
        "APARECIDA ORDÁLIA GARCIA DE LIMA,*07/09/1943,aparecida.jpg",
        "MARIA CRISTINA ANERÃO,*10/09/1941,+12/03/2023,cristina.jpg",
        "LEANDRO HENRIQUE DE LIMA NETO,*29/09/1990,leandro.jpg",
        "PAULO DE ASSIS ANERÃO,*18/10/1962,paulo.jpg",
        "ANTONIO AMAURI ANERÃO,*19/10/1965,amauri.jpg",
        "SONIA REGINA MOLLER,*21/10/1975,+10/10/2019,sonia.jpg",
        "ANTONIO AMAURI ANERÃO JUNIOR,*24/10/1991,amauri_jr.jpg",
        "SOLAMITA FERNANDES DE LIMA,*30/10/1972,solamita.jpg",
        "VICENTE GESTICH,*13/11/1938,+27/05/2022,vicente.jpg",
        "LUIZ FERNANDO LIMA ANERÃO,*27/11/2005,luiz.jpg",
        "ARVELINO ANERÃO,*29/11/1937,+02/07/2007,arvelino.png",
        "SANDRO FERNANDES DE LIMA,*29/11/1974,+23/12/2016,sandro.jpg",
        "ANTONIO GESTICH,*02/12/1951,antonio_gestich.jpg",
        "ROSA LIA ANERÃO MOLLER,*15/12/1943,rosalina.jpg",
        "RITA DE CÁSSIA RIBEIRO,*18/12/1974,rita.jpg",
        "REGINA APARECIDA RIBEIRO,*21/12/1971,regina.jpg",
        "25/12 NATAL DO MENINO JESUS,jesus.jpg"
    ];

    let pessoas = [];
    const mesesNomes = ["JANEIRO", "FEVEREIRO", "MARÇO", "ABRIL", "MAIO", "JUNHO", "JULHO", "AGOSTO", "SETEMBRO", "OUTUBRO", "NOVEMBRO", "DEZEMBRO"];

    function parseData(str) {
        if(!str) return null;
        const [d, m, y] = str.split('/').map(Number);
        return new Date(y, m - 1, d);
    }

    function getSigno(data) {
        if (!data) return { nome: "Divino", sym: "✨" };
        const dia = data.getDate();
        const mes = data.getMonth() + 1;
        if ((mes == 3 && dia >= 21) || (mes == 4 && dia <= 19)) return {nome: "Áries", sym: "♈"};
        if ((mes == 4 && dia >= 20) || (mes == 5 && dia <= 20)) return {nome: "Touro", sym: "♉"};
        if ((mes == 5 && dia >= 21) || (mes == 6 && dia <= 20)) return {nome: "Gêmeos", sym: "♊"};
        if ((mes == 6 && dia >= 21) || (mes == 7 && dia <= 22)) return {nome: "Câncer", sym: "♋"};
        if ((mes == 7 && dia >= 23) || (mes == 8 && dia <= 22)) return {nome: "Leão", sym: "♌"};
        if ((mes == 8 && dia >= 23) || (mes == 9 && dia <= 22)) return {nome: "Virgem", sym: "♍"};
        if ((mes == 9 && dia >= 23) || (mes == 10 && dia <= 22)) return {nome: "Libra", sym: "♎"};
        if ((mes == 10 && dia >= 23) || (mes == 11 && dia <= 21)) return {nome: "Escorpião", sym: "♏"};
        if ((mes == 11 && dia >= 22) || (mes == 12 && dia <= 21)) return {nome: "Sagitário", sym: "♐"};
        if ((mes == 12 && dia >= 22) || (mes == 1 && dia <= 19)) return {nome: "Capricórnio", sym: "♑"};
        if ((mes == 1 && dia >= 20) || (mes == 2 && dia <= 18)) return {nome: "Aquário", sym: "♒"};
        return {nome: "Peixes", sym: "♓"};
    }

    function calcularIdade(nasc, falec) {
        if (!nasc) return null;
        let fim = falec || hoje;
        let anos = fim.getFullYear() - nasc.getFullYear();
        let m = fim.getMonth() - nasc.getMonth();
        if (m < 0 || (m === 0 && fim.getDate() < nasc.getDate())) anos--;
        return anos;
    }

    // Inicialização dos dados
    pessoas = rawData.map(linha => {
        const partes = linha.split(',');
        const isEspecial = partes[0].includes("NATAL");
        
        let nome, nascStr, falecStr, foto;
        
        if(isEspecial) {
            nome = partes[0];
            foto = partes[1];
            return { nome, foto, especial: true, mes: 11, dia: 25 };
        } else {
            nome = partes[0];
            nascStr = partes[1].replace('*', '');
            falecStr = partes.length === 4 ? partes[2].replace('+', '') : null;
            foto = partes[partes.length - 1];
            
            const dtNasc = parseData(nascStr);
            const dtFalec = parseData(falecStr);
            
            return {
                nome,
                dtNasc,
                dtFalec,
                foto,
                idade: calcularIdade(dtNasc, dtFalec),
                anosFalecimento: dtFalec ? calcularIdade(dtFalec, null) : null,
                signo: getSigno(dtNasc),
                mes: dtNasc.getMonth(),
                dia: dtNasc.getDate(),
                nascFormat: nascStr,
                falecFormat: falecStr
            };
        }
    });

    function renderizar(lista) {
        const container = document.getElementById('lista-aniversariantes');
        container.innerHTML = '';
        const buscaTermo = normalizar(document.getElementById('busca').value);

        document.getElementById('totalReg').innerText = pessoas.length;
        document.getElementById('totalFilt').innerText = lista.length;

        for (let i = 0; i < 12; i++) {
            const pessoasMes = lista.filter(p => p.mes === i).sort((a,b) => a.dia - b.dia);
            
            if (pessoasMes.length > 0) {
                const sec = document.createElement('div');
                sec.className = 'mes-secao';
                sec.innerHTML = `<div class="mes-titulo">${mesesNomes[i]}</div>`;
                
                const grid = document.createElement('div');
                grid.className = 'grid-pessoas';

                pessoasMes.forEach(p => {
                    const isAnivHoje = p.dtNasc && p.dtNasc.getDate() === hoje.getDate() && p.dtNasc.getMonth() === hoje.getMonth();
                    const card = document.createElement('div');
                    card.className = 'card';

                    let html = `
                        <div class="moldura"><img src="${servidor}${p.foto}" alt="${p.nome}"></div>
                        <span class="nome">${destacar(p.nome, buscaTermo)}</span>
                    `;

                    if (!p.especial) {
                        html += `
                            <div class="data-nasc">${p.nascFormat}</div>
                            <div class="idade">${p.idade} anos</div>
                            <div class="signo">${p.signo.sym} ${destacar(p.signo.nome, buscaTermo)}</div>
                        `;

                        if (p.dtFalec) {
                            html += `<div class="falecimento">† ${p.falecFormat}<br>(há ${p.anosFalecimento} anos)</div>`;
                        }

                        if (isAnivHoje) {
                            html += `<div class="piscante">${p.dtFalec ? 'Faria aniversário hoje!' : 'Parabéns, Feliz Aniversário!'}</div>`;
                        }
                    } else {
                        html += `<div class="signo">✨ Divino</div>`;
                    }

                    card.innerHTML = html;
                    grid.appendChild(card);
                });
                sec.appendChild(grid);
                container.appendChild(sec);
            }
        }
    }

    function normalizar(str) {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
    }

    function destacar(texto, termo) {
        if (!termo) return texto;
        const regex = new RegExp(`(${termo})`, 'gi');
        return texto.replace(regex, '<span class="highlight">$1</span>');
    }

    function filtrar() {
        const termo = normalizar(document.getElementById('busca').value);
        const filtrados = pessoas.filter(p => {
            const alvo = normalizar(`${p.nome} ${mesesNomes[p.mes]} ${p.signo ? p.signo.nome : ''}`);
            return alvo.includes(termo);
        });
        renderizar(filtrados);
    }

    function filtrarMes(offset) {
        const alvo = new Date(hoje.getFullYear(), hoje.getMonth() + offset, 1).getMonth();
        renderizar(pessoas.filter(p => p.mes === alvo));
    }

    function filtrarStatus(status) {
        if (status === 'vivos') {
            renderizar(pessoas.filter(p => !p.dtFalec));
        } else {
            renderizar(pessoas.filter(p => p.dtFalec && !p.especial));
        }
    }

    function limparInput() {
        document.getElementById('busca').value = '';
        renderizar(pessoas);
    }

    function resetarFiltros() {
        limparInput();
    }

    // Iniciar
    renderizar(pessoas);
</script>

</body>
</html>
