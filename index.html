<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aniversariantes - Família</title>
    <style>
        :root {
            --dourado: #d4af37;
            --azul-negrito: #0000FF;
            --verde-negrito: #008000;
            --cinza-chumbo: #333333;
            --vermelho-negrito: #CC0000;
        }

        body { font-family: Arial, sans-serif; background-color: #f4f4f4; text-align: center; }
        .container { max-width: 800px; margin: auto; padding: 20px; }
        
        .busca-container { position: sticky; top: 0; background: white; padding: 15px; z-index: 100; border-bottom: 2px solid var(--dourado); }
        input { padding: 10px; width: 80%; border-radius: 5px; border: 1px solid #ccc; }

        .mes-bloco { margin-top: 30px; background: white; border-radius: 10px; padding: 10px; }
        .mes-titulo { color: var(--vermelho-negrito); text-transform: uppercase; border-bottom: 2px solid var(--vermelho-negrito); padding: 5px; }

        .pessoa-card { display: flex; flex-direction: column; align-items: center; margin: 20px 0; padding: 10px; border-bottom: 1px dotted #ccc; }
        
        .moldura-foto {
            width: 150px; height: 150px;
            border-radius: 50%;
            border: 5px solid var(--dourado);
            overflow: hidden;
            margin-bottom: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .moldura-foto img { width: 100%; height: 100%; object-fit: cover; }

        .nome { color: var(--azul-negrito); font-weight: bold; font-size: 1.2em; text-decoration: none; }
        .data-nasc { color: var(--verde-negrito); font-weight: bold; }
        .data-falec { color: var(--cinza-chumbo); }
        .signo-info { font-style: italic; color: #555; font-size: 0.9em; }
        
        .piscante {
            color: red;
            font-weight: bold;
            animation: blink 1s infinite;
        }

        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }

        .oculto { display: none; }
    </style>
</head>
<body>

<div class="container">
    <h2>ANIVERSARIANTES</h2>
    
    <div class="busca-container">
        <input type="text" id="inputBusca" placeholder="Busque por nome, mês ou signo..." onkeyup="filtrar()">
        <p>Total de Registros: <span id="totalReg">0</span></p>
    </div>

    <div id="listaAniversariantes"></div>

    <footer>
        <p>©Amarildo, 2018-2026<br>Atualizado: 26/01/2026</p>
    </footer>
</div>

<script>
    const dadosBrutos = [
        "INGRID GRAZIELA FERNANDES ANERÃO, *06/01/1997, ingrid.jpg",
        "MARIA AMARILZA ANERÃO, *14/01/1969, amarilza.jpg",
        "SANDRA REGINA MOLLER DE CAMPOS, *22/01/1964, 20/07/2020, sandra.jpg",
        "ROSA FRACHELLI ANERÃO, *01/02/1901, 15/01/1971, rosa_frachelli.jpg",
        "BRAZ GESTICH, *03/02/1944, 08/05/2023, braz.jpg",
        "HUMBERTO DONIZETE ANERÃO, *22/02/1961, 14/07/2021, humberto.png",
        "PRISCILA TOLEDO RETTI, *03/03/1990, priscila.jpg",
        "VALERIA APARECIDA GESTICH, *07/03/1988, valeria.jpg",
        "IRIA RIBEIRO ANERÃO, *23/03/1930, 10/01/1979, iria.jpg",
        "ZULMIRA BORGES GESTICH, *25/03/1907, 19/09/1964, zulmira.JPG",
        "NICOLAS MIGUEL ANERÃO FONSECA, *25/03/2014, nicolas.jpg",
        "JOSÉ AMARILDO ANERÃO, *30/03/1963, amarildo.jpg",
        "IVANIRA FERREIRA LIMA, *01/04/1973, ivanira.jpg",
        "MARIA DE LOURDES MALAQUIAS GESTICH, *07/04/1955, maria_lourdes.jpg",
        "ROSA APARECIDA ANERÃO DE JESUS, *08/04/1950, 20/09/2021, rosa_aparecida.jpg",
        "AURORA RIBEIRO, *16/04/1946, aurora.jpg",
        "ARLINDO FRANCISCO RIBEIRO, *16/04/1948, 24/10/2001, arlindo.jpg",
        "DIONATAS WILLIAN DE SOUZA FONSECA, *18/04/1992, dionatas.jpg",
        "CAROLINA GABRIELA FERNANDES ANERÃO, *04/05/1994, carolina.jpg",
        "JOSÉ REGINALDO GESTICH, *29/05/1980, jose_reginaldo.jpg",
        "KARINA KRISTINA LIMA ANERÃO, *30/05/1996, karina.jpg",
        "GENÉSIO DE SOUZA, *11/06/1947, 08/02/2000, genesio.jpg",
        "AMÉLIA ANERÃO DONEDA, *15/06/1926, 23/02/2020, amelia.png",
        "JOÃO PAULO GESTICH, *19/06/1984, joao_paulo.jpg",
        "JOÃO GESTICH, *24/06/1895, 04/05/1980, joao_gestich.jpg",
        "LEONOR OLIVEIRA DE SOUZA, *29/06/1951, 21/03/2019, leonor.jpg",
        "GUILHERME GABRIEL FERNANDES ANERÃO, *06/07/2009, guilherme.jpg",
        "ELIAS GESTICH, *27/07/1948, elias.jpg",
        "ANTONIO FERNANDES DE LIMA, *18/08/1943, 28/02/2019, Antonio_lima.jpg",
        "JOÃO ANERÃO, *24/08/1924, 30/01/2007, joao_anerao.png",
        "JOSÉ ANERÃO, *25/08/1889, 11/08/1976, jose_anerao.jpg",
        "LAURA RACHEL DIAS LINS ANERÃO, *05/09/1982, laura.jpg",
        "APARECIDA ORDÁLIA GARCIA DE LIMA, *07/09/1943, aparecida.jpg",
        "MARIA CRISTINA ANERÃO, *10/09/1941, 12/03/2023, cristina.jpg",
        "LEANDRO HENRIQUE DE LIMA NETO, *29/09/1990, leandro.jpg",
        "PAULO DE ASSIS ANERÃO, *18/10/1962, paulo.jpg",
        "ANTONIO AMAURI ANERÃO, *19/10/1965, amauri.jpg",
        "SONIA REGINA MOLLER, *21/10/1975, 10/10/2019, sonia.jpg",
        "ANTONIO AMAURI ANERÃO JUNIOR, *24/10/1991, amauri_jr.jpg",
        "SOLAMITA FERNANDES DE LIMA, *30/10/1972, solamita.jpg",
        "VICENTE GESTICH, *13/11/1938, 27/05/2022, vicente.jpg",
        "LUIZ FERNANDO LIMA ANERÃO, *27/11/2005, luiz.jpg",
        "ARVELINO ANERÃO, *29/11/1937, 02/07/2007, arvelino.png",
        "SANDRO FERNANDES DE LIMA, *29/11/1974, 23/12/2016, sandro.jpg",
        "ANTONIO GESTICH, *02/12/1951, antonio_gestich.jpg",
        "ROSA LIA ANERÃO MOLLER, *15/12/1943, rosalina.jpg",
        "RITA DE CÁSSIA RIBEIRO, *18/12/1974, rita.jpg",
        "REGINA APARECIDA RIBEIRO, *21/12/1971, regina.jpg",
        "NATAL DO MENINO JESUS (25/12), jesus.jpg"
    ];

    const mesesNomes = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];

    function removerAcentos(str) {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
    }

    function getSigno(dia, mes) {
        const signos = [
            {n: "Capricórnio", s: "♑", d: 20, m: 1}, {n: "Aquário", s: "♒", d: 18, m: 2},
            {n: "Peixes", s: "♓", d: 20, m: 3}, {n: "Áries", s: "♈", d: 19, m: 4},
            {n: "Touro", s: "♉", d: 20, m: 5}, {n: "Gêmeos", s: "♊", d: 20, m: 6},
            {n: "Câncer", s: "♋", d: 22, m: 7}, {n: "Leão", s: "♌", d: 22, m: 8},
            {n: "Virgem", s: "♍", d: 22, m: 9}, {n: "Libra", s: "♎", d: 22, m: 10},
            {n: "Escorpião", s: "♏", d: 21, m: 11}, {n: "Sagitário", s: "♐", d: 21, m: 12}
        ];
        const signo = signos.find(s => (mes < s.m) || (mes === s.m && dia <= s.d));
        return signo ? signo : {n: "Capricórnio", s: "♑"};
    }

    function calcularIdade(nasc, falec = null) {
        const d1 = nasc;
        const d2 = falec ? falec : new Date(2026, 0, 26); // Simulando data de hoje conforme instrução
        let anos = d2.getFullYear() - d1.getFullYear();
        if (d2.getMonth() < d1.getMonth() || (d2.getMonth() === d1.getMonth() && d2.getDate() < d1.getDate())) {
            anos--;
        }
        return anos;
    }

    function processarDados() {
        const hoje = new Date(2026, 0, 26); // Data do sistema bloqueada em 2026
        let processados = [];

        dadosBrutos.forEach(linha => {
            const partes = linha.split(',').map(p => p.trim());
            const nome = partes[0];
            const isJesus = nome.includes("NATAL");
            
            let dataNascStr = partes.find(p => p.startsWith('*'))?.replace('*', '');
            let foto = partes[partes.length - 1];
            let dataFalecStr = partes.length === 4 ? partes[2] : null;

            if (isJesus) {
                processados.push({ nome, mes: 12, dia: 25, isJesus: true, foto });
                return;
            }

            const [dN, mN, aN] = dataNascStr.split('/').map(Number);
            const dataNascObj = new Date(aN, mN - 1, dN);
            
            let dataFalecObj = null;
            if (dataFalecStr) {
                const [dF, mF, aF] = dataFalecStr.split('/').map(Number);
                dataFalecObj = new Date(aF, mF - 1, dF);
            }

            const idade = calcularIdade(dataNascObj, dataFalecObj);
            const signo = getSigno(dN, mN);
            const eAniversario = dN === hoje.getDate() && mN === (hoje.getMonth() + 1);

            processados.push({
                nome, dia: dN, mes: mN, ano: aN,
                dataNascStr, dataFalecStr,
                idade, signo, foto, dataFalecObj, eAniversario
            });
        });

        // Ordenar por mês e depois por dia
        processados.sort((a, b) => a.mes - b.mes || a.dia - b.dia);
        renderizar(processados);
    }

    function renderizar(lista) {
        const container = document.getElementById('listaAniversariantes');
        container.innerHTML = "";
        let mesAtual = -1;
        let contadorVisivel = 0;

        lista.forEach(p => {
            if (p.mes !== mesAtual) {
                mesAtual = p.mes;
                const tituloMes = document.createElement('h3');
                tituloMes.className = 'mes-titulo';
                tituloMes.innerText = mesesNomes[mesAtual - 1];
                container.appendChild(tituloMes);
            }

            const card = document.createElement('div');
            card.className = 'pessoa-card';
            card.dataset.nome = removerAcentos(p.nome);
            card.dataset.mes = removerAcentos(mesesNomes[p.mes - 1]);
            card.dataset.signo = p.isJesus ? "" : removerAcentos(p.signo.n);

            let html = `
                <div class="moldura-foto"><img src="fotos/${p.foto}" alt="${p.nome}"></div>
                <div class="nome">${p.nome}</div>
            `;

            if (!p.isJesus) {
                html += `
                    <div class="data-nasc">*${p.dataNascStr} (${p.idade} anos)</div>
                    ${p.dataFalecStr ? `<div class="data-falec"><span style="color:#333">†</span> ${p.dataFalecStr}</div>` : ''}
                    <div class="signo-info">${p.signo.s} ${p.signo.n}</div>
                `;

                if (p.eAniversario) {
                    html += p.dataFalecObj 
                        ? `<div class="piscante">Faria aniversário hoje!</div>`
                        : `<div class="piscante">Parabéns, Feliz Aniversário!</div>`;
                }
            }

            card.innerHTML = html;
            container.appendChild(card);
            contadorVisivel++;
        });
        document.getElementById('totalReg').innerText = contadorVisivel;
    }

    function filtrar() {
        const termo = removerAcentos(document.getElementById('inputBusca').value);
        const cards = document.querySelectorAll('.pessoa-card');
        let cont = 0;

        cards.forEach(card => {
            const match = card.dataset.nome.includes(termo) || 
                          card.dataset.mes.includes(termo) || 
                          card.dataset.signo.includes(termo);
            
            if (match) {
                card.style.display = "flex";
                cont++;
            } else {
                card.style.display = "none";
            }
        });

        // Esconder títulos de meses vazios
        document.querySelectorAll('.mes-titulo').forEach(titulo => {
            let proximo = titulo.nextElementSibling;
            let temVisivel = false;
            while(proximo && !proximo.classList.contains('mes-titulo')) {
                if(proximo.style.display !== "none") temVisivel = true;
                proximo = proximo.nextElementSibling;
            }
            titulo.style.display = temVisivel ? "block" : "none";
        });

        document.getElementById('totalReg').innerText = cont;
    }

    processarDados();
</script>

</body>
</html>
