<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aniversariantes - JAA</title>
    <style>
        :root {
            --azul: #0000FF;
            --verde: #008000;
            --cinza: #808080;
            --vermelho: #FF0000;
            --moldura: #D4AF37;
        }
        body { font-family: sans-serif; margin: 20px; background: #f4f4f4; }
        .header { text-align: center; margin-bottom: 20px; }
        
        #busca { width: 100%; padding: 10px; margin-bottom: 20px; border-radius: 5px; border: 1px solid #ccc; }
        
        .painel-proximos { 
            background: #fff; border: 1px solid #ddd; padding: 10px; 
            font-size: 12px; margin-bottom: 20px; border-radius: 8px;
        }

        .mes-container { background: #fff; margin-bottom: 20px; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .mes-titulo { color: var(--vermelho); font-weight: bold; border-bottom: 2px solid var(--vermelho); margin-bottom: 15px; text-transform: uppercase; }

        .grid-pessoas { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .pessoa-card { text-align: center; padding: 10px; border: 1px solid #eee; border-radius: 10px; transition: 0.3s; }
        
        .foto-container { width: 100px; height: 100px; margin: 0 auto 10px; }
        .foto { 
            width: 100%; height: 100%; object-fit: cover; 
            border-radius: 50%; border: 4px solid var(--moldura); 
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }

        .nome { color: var(--azul); font-weight: bold; font-size: 14px; display: block; }
        .data-nasc { color: var(--verde); font-weight: bold; font-size: 13px; }
        .data-fale { color: var(--cinza); font-size: 12px; }
        .signo { font-size: 12px; font-style: italic; }
        
        .highlight { background-color: yellow; }
        
        .blink { animation: blinker 1s linear infinite; color: var(--vermelho); font-weight: bold; font-size: 12px; }
        @keyframes blinker { 50% { opacity: 0; } }

        footer { text-align: center; margin-top: 40px; font-size: 12px; color: #666; }
    </style>
</head>
<body>

    <div class="header">
        <h2>ANIVERSARIANTES</h2>
        <p>Total de Registros: <span id="total-registros">0</span></p>
        <input type="text" id="busca" placeholder="Filtrar Registros (Nome, Mês ou Signo)...">
    </div>

    <div id="painel-proximos" class="painel-proximos">
        <strong>Próximos 30 dias:</strong> <span id="lista-proximos"></span>
    </div>

    <div id="conteudo-principal"></div>

    <footer>
        ©Amarildo, 2016-2026<br>
        Atualizado: 01/02/2026
    </footer>

<script>
    const API_FOTOS = "https://amarildo1963.github.io/jaa/fotos/";
    const dadosBrutos = `INGRID GRAZIELA FERNANDES ANERÃO,*06/01/1997,ingrid.jpg
MARIA AMARILZA ANERÃO,*14/01/1969,amarilza.jpg
SANDRA REGINA MOLLER DE CAMPOS,*22/01/1964,+20/07/2020,sandra.jpg
ROSA FRACHELLI ANERÃO,*01/02/1901,+15/01/1971,rosa_frachelli.jpg
BRAZ GESTICH,*03/02/1944,+08/05/2023,braz.jpg
HUMBERTO DONIZETE ANERÃO,*22/02/1961,+14/07/2021,humberto.png
PRISCILA TOLEDO RETI,*03/03/1990,priscila.jpg
VALERIA APARECIDA GESTICH,*07/03/1988,valeria.jpg
IRIA RIBEIRO ANERÃO,*23/03/1930,+10/01/1979,iria.jpg
ZULMIRA BORGES GESTICH,*25/03/1907,+19/09/1964,zulmira.JPG
NICOLAS MIGUEL ANERÃO FONSECA,*25/03/2014,nicolas.jpg
JOSÉ AMARILDO ANERÃO,*30/03/1963,amarildo.jpg
IVANIRA FERREIRA LIMA,*01/04/1973,ivanira.jpg
MARIA DE LOURDES MALAQUIAS GESTICH,*07/04/1955,maria_lourdes.jpg
ROSA APARECIDA ANERÃO DE JESUS,*08/04/1950,+20/09/2021,rosa_aparecida.jpg
AURORA RIBEIRO,*16/04/1946,aurora.jpg
ARLINDO FRANCISCO RIBEIRO,*16/04/1948,+24/10/2001,arlindo.jpg
DIONATAS WILLIAN DE SOUZA FONSECA,*18/04/1992,dionatas.jpg
CAROLINA GABRIELA FERNANDES ANERÃO,*04/05/1994,carolina.jpg
JOSÉ REGINALDO GESTICH,*29/05/1980,jose_reginaldo.jpg
KARINA KRISTINA LIMA ANERÃO,*30/05/1996,karina.jpg
GENÉSIO DE SOUZA,*11/06/1947,+08/02/2000,genesio.jpg
AMÉLIA ANERÃO DONEDA,*15/06/1926,+23/02/2020,amelia.png
JOÃO PAULO GESTICH,*19/06/1984,joao_paulo.jpg
JOÃO GESTICH,*24/06/1895,+04/05/1980,joao_gestich.jpg
LEONOR OLIVEIRA DE SOUZA,*29/06/1951,+21/03/2019,leonor.jpg
GUILHERME GABRIEL FERNANDES ANERÃO,*06/07/2009,guilherme.jpg
ELIAS GESTICH,*27/07/1948,elias.jpg
ANTONIO FERNANDES DE LIMA,*18/08/1943,+28/02/2019,Antonio_lima.jpg
JOÃO ANERÃO,*24/08/1924,+30/01/2007,joao_anerao.png
JOSÉ ANERÃO,*25/08/1889,+11/08/1976,jose_anerao.jpg
LAURA RACHEL DIAS LINS ANERÃO,*05/09/1982,laura.jpg
APARECIDA ORDÁLIA GARCIA DE LIMA,*07/09/1943,aparecida.jpg
MARIA CRISTINA ANERÃO,*10/09/1941,+12/03/2023,cristina.jpg
LEANDRO HENRIQUE DE LIMA NETO,*29/09/1990,leandro.jpg
PAULO DE ASSIS ANERÃO,*18/10/1962,paulo.jpg
ANTONIO AMAURI ANERÃO,*19/10/1965,amauri.jpg
SONIA REGINA MOLLER,*21/10/1975,+10/10/2019,sonia.jpg
ANTONIO AMAURI ANERÃO JUNIOR,*24/10/1991,amauri_jr.jpg
SOLAMITA FERNANDES DE LIMA,*30/10/1972,solamita.jpg
VICENTE GESTICH,*13/11/1938,+27/05/2022,vicente.jpg
LUIZ FERNANDO LIMA ANERÃO,*27/11/2005,luiz.jpg
ARVELINO ANERÃO,*29/11/1937,+02/07/2007,arvelino.png
SANDRO FERNANDES DE LIMA,*29/11/1974,+23/12/2016,sandro.jpg
ANTONIO GESTICH,*02/12/1951,antonio_gestich.jpg
ROSA LIA ANERÃO MOLLER,*15/12/1943,rosalina.jpg
RITA DE CÁSSIA RIBEIRO,*18/12/1974,rita.jpg
REGINA APARECIDA RIBEIRO,*21/12/1971,regina.jpg
NATAL DO MENINO JESUS (25/12),jesus.jpg`;

    const mesesNome = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];

    function getSigno(dia, mes) {
        const signos = [
            { n: "Capricórnio", s: "♑", d: 20 }, { n: "Aquário", s: "♒", d: 18 }, { n: "Peixes", s: "♓", d: 20 },
            { n: "Áries", s: "♈", d: 20 }, { n: "Touro", s: "♉", d: 20 }, { n: "Gêmeos", s: "♊", d: 20 },
            { n: "Câncer", s: "♋", d: 22 }, { n: "Leão", s: "♌", d: 22 }, { n: "Virgem", s: "♍", d: 22 },
            { n: "Libra", s: "♎", d: 22 }, { n: "Escorpião", s: "♏", d: 21 }, { n: "Sagitário", s: "♐", d: 21 }
        ];
        return dia > signos[mes-1].d ? {nome: signos[mes % 12].n, simb: signos[mes % 12].s} : {nome: signos[mes-1].n, simb: signos[mes-1].s};
    }

    function parseData(str) {
        if (!str) return null;
        const [d, m, y] = str.replace(/[*+]/g, '').split('/').map(Number);
        const date = new Date();
        date.setFullYear(y, m - 1, d);
        date.setHours(0,0,0,0);
        return date;
    }

    function processarDados() {
        const linhas = dadosBrutos.trim().split('\n');
        return linhas.map(linha => {
            const partes = linha.split(',');
            const nome = partes[0];
            const isNatal = nome.includes("NATAL");
            const dataNascStr = partes.find(p => p.startsWith('*')) || (isNatal ? "*25/12/0001" : "");
            const dataFaleStr = partes.find(p => p.startsWith('+')) || "";
            const foto = partes[partes.length - 1];

            const dNasc = parseData(dataNascStr);
            const dFale = parseData(dataFaleStr);

            return { nome, dNasc, dFale, dataNascStr, dataFaleStr, foto, isNatal };
        });
    }

    function render() {
        const pessoas = processarDados();
        const filtro = document.getElementById('busca').value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
        const hoje = new Date();
        hoje.setHours(0,0,0,0);

        let html = '';
        let proximos = [];
        let total = 0;

        for (let m = 0; m < 12; m++) {
            const pessoasMes = pessoas.filter(p => p.dNasc && p.dNasc.getMonth() === m)
                                     .sort((a, b) => a.dNasc.getDate() - b.dNasc.getDate());

            let mesHtml = '';
            pessoasMes.forEach(p => {
                const signoObj = getSigno(p.dNasc.getDate(), p.dNasc.getMonth() + 1);
                const matchBusca = [p.nome, mesesNome[m], signoObj.nome].some(s => s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").includes(filtro));
                
                if (filtro && !matchBusca) return;
                total++;

                // Lógica de Aniversário
                const fezAnivHoje = p.dNasc.getDate() === hoje.getDate() && p.dNasc.getMonth() === hoje.getMonth();
                
                // Lógica de Próximos 30 dias
                const anivEsteAno = new Date(hoje.getFullYear(), p.dNasc.getMonth(), p.dNasc.getDate());
                const diff = (anivEsteAno - hoje) / (1000 * 60 * 60 * 24);
                if (diff >= 0 && diff <= 30) proximos.push(`${p.nome} (${p.dNasc.getDate()}/${p.dNasc.getMonth()+1})`);

                // Cálculo de Idade/Falecimento
                let infoIdade = "";
                if (!p.isNatal) {
                    const refMorte = p.dFale || hoje;
                    let idade = refMorte.getFullYear() - p.dNasc.getFullYear();
                    if (refMorte.getMonth() < p.dNasc.getMonth() || (refMorte.getMonth() === p.dNasc.getMonth() && refMorte.getDate() < p.dNasc.getDate())) idade--;
                    infoIdade = ` (${idade} anos)`;
                }

                let tempoFalecimento = "";
                if (p.dFale) {
                    let anosFale = hoje.getFullYear() - p.dFale.getFullYear();
                    if (hoje.getMonth() < p.dFale.getMonth() || (hoje.getMonth() === p.dFale.getMonth() && hoje.getDate() < p.dFale.getDate())) anosFale--;
                    tempoFalecimento = `<div class="data-fale">✝ ${p.dataFaleStr.replace('+','')} - há ${anosFale} anos</div>`;
                }

                const nomeFormatado = filtro ? p.nome.replace(new RegExp(filtro, 'gi'), m => `<span class="highlight">${m}</span>`) : p.nome;

                mesHtml += `
                    <div class="pessoa-card">
                        <div class="foto-container"><img src="${API_FOTOS}${p.foto}" class="foto" onerror="this.src='https://via.placeholder.com'"></div>
                        <span class="nome">${nomeFormatado}</span>
                        ${!p.isNatal ? `<div class="data-nasc">${p.dataNascStr.replace('*','')}${infoIdade}</div>` : ''}
                        ${tempoFalecimento}
                        ${fezAnivHoje ? `<div class="blink">${p.dFale ? 'Faria aniversário hoje!' : 'Parabéns, Feliz Aniversário!'}</div>` : ''}
                        ${!p.isNatal ? `<div class="signo">${signoObj.simb} ${signoObj.nome}</div>` : ''}
                    </div>
                `;
            });

            if (mesHtml) {
                html += `<div class="mes-container"><div class="mes-titulo">${mesesNome[m]}</div><div class="grid-pessoas">${mesHtml}</div></div>`;
            }
        }

        document.getElementById('conteudo-principal').innerHTML = html;
        document.getElementById('total-registros').innerText = total;
        document.getElementById('lista-proximos').innerText = proximos.join(', ');
    }

    document.getElementById('busca').addEventListener('input', render);
    render();
</script>
</body>
</html>
