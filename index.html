<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aniversariantes - Família</title>
    <style>
        :root {
            --dourado: #d4af37;
            --azul: #0000ff;
            --verde: #008000;
            --cinza: #808080;
            --vermelho: #ff0000;
        }

        body { font-family: Arial, sans-serif; background-color: #f4f4f4; text-align: center; padding: 20px; }
        
        .busca-container { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        input { padding: 10px; width: 80%; max-width: 400px; border-radius: 5px; border: 1px solid #ccc; }

        .proximos-niver { background: #ffebee; border: 2px solid var(--vermelho); padding: 10px; margin-bottom: 20px; display: none; animation: pisca 1s infinite; }
        .proximos-niver h3 { color: var(--azul); margin: 5px 0; }

        .mes-container { background: #fff; margin: 20px auto; padding: 15px; border-radius: 8px; max-width: 1000px; }
        .mes-titulo { color: var(--vermelho); font-weight: bold; font-size: 1.5em; border-bottom: 2px solid var(--vermelho); padding-bottom: 5px; }

        .grid-pessoas { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px; }
        .card { width: 220px; background: #fff; padding: 15px; border-radius: 10px; transition: 0.3s; }
        
        .foto-moldura { width: 120px; height: 120px; border-radius: 50%; border: 5px solid var(--dourado); object-fit: cover; margin-bottom: 10px; }
        
        .nome { color: var(--azul); font-weight: bold; display: block; margin-bottom: 5px; }
        .data-nasc { color: var(--verde); font-weight: bold; font-size: 0.9em; }
        .data-falec { color: var(--cinza); font-size: 0.85em; display: block; }
        .signo { font-size: 0.85em; font-style: italic; color: #555; }
        .idade-destaque { font-weight: bold; color: #333; }

        .highlight { background-color: yellow; }
        .pisca-alerta { color: var(--vermelho); font-weight: bold; animation: pisca 0.8s infinite; display: block; }

        @keyframes pisca { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
        footer { margin-top: 50px; font-size: 0.8em; color: #777; }
    </style>
</head>
<body>

    <h2>ANIVERSARIANTES</h2>
    <div class="busca-container">
        <input type="text" id="inputBusca" placeholder="Busque por nome, mês ou signo..." onkeyup="filtrar()">
        <p>Total de Registros: <span id="totalReg">0</span> | Filtrados: <span id="totalFiltro">0</span></p>
    </div>

    <div id="blocoProximos" class="proximos-niver"></div>

    <div id="listaAniversariantes"></div>

    <footer>
        ©Amarildo, 2016-2026<br>
        Atualizado: 31/01/2026
    </footer>

<script>
    const RAW_DATA = `INGRID GRAZIELA FERNANDES ANERÃO,*06/01/1997,ingrid.jpg
MARIA AMARILZA ANERÃO,*14/01/1969,amarilza.jpg
SANDRA REGINA MOLLER DE CAMPOS,*22/01/1964,+20/07/2020,sandra.jpg
ROSA FRACHELLI ANERÃO,*01/02/1901,+15/01/1971,rosa_frachelli.jpg
BRAZ GESTICH,*03/02/1944,+08/05/2023,braz.jpg
HUMBERTO DONIZETE ANERÃO,*22/02/1961,+14/07/2021,humberto.png
PRISCILA TOLEDO RETI,*03/03/1990,priscila.jpg
VALERIA APARECIDA GESTICH,*07/03/1988,valeria.jpg
IRIA RIBEIRO ANERÃO,*23/03/1930,+10/01/1979,iria.jpg
ZULMIRA BORGES GESTICH,*25/03/1907,+19/09/1964,zulmira.JPG
NICOLAS MIGUEL ANERÃO FONSECA,*25/03/2014,nicolas.jpg
JOSÉ AMARILDO ANERÃO,*30/03/1963,amarildo.jpg
IVANIRA FERREIRA LIMA,*01/04/1973,ivanira.jpg
MARIA DE LOURDES MALAQUIAS GESTICH,*07/04/1955,maria_lourdes.jpg
ROSA APARECIDA ANERÃO DE JESUS,*08/04/1950,+20/09/2021,rosa_aparecida.jpg
AURORA RIBEIRO,*16/04/1946,aurora.jpg
ARLINDO FRANCISCO RIBEIRO,*16/04/1948,+24/10/2001,arlindo.jpg
DIONATAS WILLIAN DE SOUZA FONSECA,*18/04/1992,dionatas.jpg
CAROLINA GABRIELA FERNANDES ANERÃO,*04/05/1994,carolina.jpg
JOSÉ REGINALDO GESTICH,*29/05/1980,jose_reginaldo.jpg
KARINA KRISTINA LIMA ANERÃO,*30/05/1996,karina.jpg
GENÉSIO DE SOUZA,*11/06/1947,+08/02/2000,genesio.jpg
AMÉLIA ANERÃO DONEDA,*15/06/1926,+23/02/2020,amelia.png
JOÃO PAULO GESTICH,*19/06/1984,joao_paulo.jpg
JOÃO GESTICH,*24/06/1895,+04/05/1980,joao_gestich.jpg
LEONOR OLIVEIRA DE SOUZA,*29/06/1951,+21/03/2019,leonor.jpg
GUILHERME GABRIEL FERNANDES ANERÃO,*06/07/2009,guilherme.jpg
ELIAS GESTICH,*27/07/1948,elias.jpg
ANTONIO FERNANDES DE LIMA,*18/08/1943,+28/02/2019,Antonio_lima.jpg
JOÃO ANERÃO,*24/08/1924,+30/01/2007,joao_anerao.png
JOSÉ ANERÃO,*25/08/1889,+11/08/1976,jose_anerao.jpg
LAURA RACHEL DIAS LINS ANERÃO,*05/09/1982,laura.jpg
APARECIDA ORDÁLIA GARCIA DE LIMA,*07/09/1943,aparecida.jpg
MARIA CRISTINA ANERÃO,*10/09/1941,+12/03/2023,cristina.jpg
LEANDRO HENRIQUE DE LIMA NETO,*29/09/1990,leandro.jpg
PAULO DE ASSIS ANERÃO,*18/10/1962,paulo.jpg
ANTONIO AMAURI ANERÃO,*19/10/1965,amauri.jpg
SONIA REGINA MOLLER,*21/10/1975,+10/10/2019,sonia.jpg
ANTONIO AMAURI ANERÃO JUNIOR,*24/10/1991,amauri_jr.jpg
SOLAMITA FERNANDES DE LIMA,*30/10/1972,solamita.jpg
VICENTE GESTICH,*13/11/1938,+27/05/2022,vicente.jpg
LUIZ FERNANDO LIMA ANERÃO,*27/11/2005,luiz.jpg
ARVELINO ANERÃO,*29/11/1937,+02/07/2007,arvelino.png
SANDRO FERNANDES DE LIMA,*29/11/1974,+23/12/2016,sandro.jpg
ANTONIO GESTICH,*02/12/1951,antonio_gestich.jpg
ROSA LIA ANERÃO MOLLER,*15/12/1943,rosalina.jpg
RITA DE CÁSSIA RIBEIRO,*18/12/1974,rita.jpg
REGINA APARECIDA RIBEIRO,*21/12/1971,regina.jpg
NATAL DO MENINO JESUS (25/12),jesus.jpg`;

    const URL_FOTOS = "https://amarildo1963.github.io/jaa/fotos/";
    const MESES = ["JANEIRO", "FEVEREIRO", "MARÇO", "ABRIL", "MAIO", "JUNHO", "JULHO", "AGOSTO", "SETEMBRO", "OUTUBRO", "NOVEMBRO", "DEZEMBRO"];

    function parseData(str) {
        if (!str) return null;
        const [d, m, y] = str.replace(/[^\d/]/g, '').split('/');
        return new Date(y, m - 1, d);
    }

    function getSigno(data) {
        const dia = data.getDate();
        const mes = data.getMonth() + 1;
        if ((mes == 3 && dia >= 21) || (mes == 4 && dia <= 19)) return "♈ Áries";
        if ((mes == 4 && dia >= 20) || (mes == 5 && dia <= 20)) return "♉ Touro";
        if ((mes == 5 && dia >= 21) || (mes == 6 && dia <= 20)) return "♊ Gêmeos";
        if ((mes == 6 && dia >= 21) || (mes == 7 && dia <= 22)) return "♋ Câncer";
        if ((mes == 7 && dia >= 23) || (mes == 8 && dia <= 22)) return "♌ Leão";
        if ((mes == 8 && dia >= 23) || (mes == 9 && dia <= 22)) return "♍ Virgem";
        if ((mes == 9 && dia >= 23) || (mes == 10 && dia <= 22)) return "♎ Libra";
        if ((mes == 10 && dia >= 23) || (mes == 11 && dia <= 21)) return "♏ Escorpião";
        if ((mes == 11 && dia >= 22) || (mes == 12 && dia <= 21)) return "♐ Sagitário";
        if ((mes == 12 && dia >= 22) || (mes == 1 && dia <= 19)) return "♑ Capricórnio";
        if ((mes == 1 && dia >= 20) || (mes == 2 && dia <= 18)) return "♒ Aquário";
        return "♓ Peixes";
    }

    function calcularIdade(nasc, falec = null) {
        const fim = falec ? falec : new Date();
        let idade = fim.getFullYear() - nasc.getFullYear();
        const m = fim.getMonth() - nasc.getMonth();
        if (m < 0 || (m === 0 && fim.getDate() < nasc.getDate())) idade--;
        return idade;
    }

    const pessoas = RAW_DATA.split('\n').map(linha => {
        const partes = linha.split(',');
        const nome = partes[0];
        const eNatal = nome.includes("NATAL");
        const nascStr = partes.find(p => p.startsWith('*'));
        const falecStr = partes.find(p => p.startsWith('+'));
        const foto = partes[partes.length - 1];

        const dNasc = parseData(nascStr || (eNatal ? "25/12/0000" : ""));
        const dFalec = parseData(falecStr);

        return { 
            nome, foto, dNasc, dFalec, 
            eNatal,
            mes: dNasc ? dNasc.getMonth() : null,
            dia: dNasc ? dNasc.getDate() : null,
            signo: dNasc && !eNatal ? getSigno(dNasc) : ""
        };
    });

    function render() {
        const container = document.getElementById('listaAniversariantes');
        const blocoProx = document.getElementById('blocoProximos');
        container.innerHTML = "";
        blocoProx.innerHTML = "";
        let countGeral = 0;
        const hoje = new Date();

        // Próximos 30 dias
        const proxPessoas = pessoas.filter(p => {
            if (p.eNatal || !p.dNasc) return false;
            const niverEsteAno = new Date(hoje.getFullYear(), p.dNasc.getMonth(), p.dNasc.getDate());
            const diff = (niverEsteAno - hoje) / (1000 * 60 * 60 * 24);
            return diff >= 0 && diff <= 30;
        });

        if (proxPessoas.length > 0) {
            blocoProx.style.display = "block";
            proxPessoas.forEach(p => {
                const texto = p.dFalec ? `faria aniversário em ${p.dia}/${p.mes+1}` : `faz aniversário em ${p.dia}/${p.mes+1}`;
                blocoProx.innerHTML += `<h3>${p.nome} (${texto})</h3>`;
            });
        }

        MESES.forEach((mesNome, index) => {
            const pessoasMes = pessoas.filter(p => p.mes === index).sort((a,b) => a.dia - b.dia);
            if (pessoasMes.length === 0) return;

            let htmlMes = `<div class="mes-container" data-mes="${mesNome}">
                <div class="mes-titulo">${mesNome}</div>
                <div class="grid-pessoas">`;

            pessoasMes.forEach(p => {
                countGeral++;
                const idade = p.dNasc ? calcularIdade(p.dNasc, p.dFalec) : "";
                const anosFalec = p.dFalec ? calcularIdade(p.dFalec) : null;
                const eAniversarioHoje = p.dNasc && p.dNasc.getDate() === hoje.getDate() && p.dNasc.getMonth() === hoje.getMonth();

                htmlMes += `
                    <div class="card" data-search="${p.nome} ${mesNome} ${p.signo}">
                        <img src="${URL_FOTOS}${p.foto}" class="foto-moldura" alt="${p.nome}">
                        <span class="nome">${p.nome}</span>
                        ${eAniversarioHoje ? `<span class="pisca-alerta">${p.dFalec ? 'Faria aniversário hoje!' : 'Parabéns, Feliz Aniversário!'}</span>` : ''}
                        ${p.dNasc && !p.eNatal ? `<span class="data-nasc">* ${p.dNasc.toLocaleDateString('pt-BR')}</span>` : ''}
                        ${p.dFalec ? `<span class="data-falec">† ${p.dFalec.toLocaleDateString('pt-BR')} (há ${anosFalec} anos)</span>` : ''}
                        ${!p.eNatal ? `<div class="idade-destaque">${p.dFalec ? 'Idade:' : 'Idade:'} ${idade} anos</div>` : ''}
                        <div class="signo">${p.signo}</div>
                    </div>`;
            });

            htmlMes += `</div></div>`;
            container.innerHTML += htmlMes;
        });

        document.getElementById('totalReg').innerText = pessoas.length;
        document.getElementById('totalFiltro').innerText = pessoas.length;
    }

    function filtrar() {
        const termo = document.getElementById('inputBusca').value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
        const cards = document.querySelectorAll('.card');
        let visiveis = 0;

        cards.forEach(card => {
            const content = card.getAttribute('data-search').toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
            const nomeElement = card.querySelector('.nome');
            const originalNome = nomeElement.innerText;

            if (content.includes(termo) && termo !== "") {
                card.style.display = "block";
                visiveis++;
                const regex = new RegExp(`(${termo})`, "gi");
                nomeElement.innerHTML = originalNome.replace(regex, `<span class="highlight">$1</span>`);
            } else if (termo === "") {
                card.style.display = "block";
                visiveis++;
                nomeElement.innerHTML = originalNome;
            } else {
                card.style.display = "none";
            }
        });
        
        // Esconde meses vazios
        document.querySelectorAll('.mes-container').forEach(mes => {
            const temVisivel = Array.from(mes.querySelectorAll('.card')).some(c => c.style.display !== "none");
            mes.style.display = temVisivel ? "block" : "none";
        });

        document.getElementById('totalFiltro').innerText = visiveis;
    }

    render();
</script>
</body>
</html>
