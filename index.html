<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aniversariantes - Família</title>
    <style>
        :root {
            --gold: #d4af37;
            --blue: #00008b;
            --red: #cc0000;
            --green: #008000;
            --gray: #666666;
        }

        body { font-family: sans-serif; background: #f4f4f4; margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        
        h2 { text-align: center; color: var(--blue); }
        .search-box { width: 100%; padding: 10px; margin: 20px 0; box-sizing: border-box; font-size: 16px; border: 2px solid #ddd; }
        
        .panel { font-size: 0.85em; padding: 10px; margin-bottom: 10px; border-radius: 4px; }
        .panel-red { color: var(--red); border: 1px solid var(--red); background: #fff5f5; }
        .panel-green { color: var(--green); border: 1px solid var(--green); background: #f5fff5; }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .card { border: 1px solid #eee; padding: 15px; text-align: center; border-radius: 10px; background: #fff; }
        
        .moldura { 
            width: 120px; height: 120px; border-radius: 50%; border: 4px solid var(--gold); 
            margin: 0 auto 10px; overflow: hidden; object-fit: cover;
        }
        
        .nome { color: var(--blue); font-weight: bold; display: block; margin-bottom: 5px; }
        .data-nasc { color: var(--green); font-weight: bold; font-size: 0.9em; }
        .data-falec { color: var(--gray); font-size: 0.85em; }
        .signo { font-style: italic; font-size: 0.8em; color: #555; }
        .idade-destaque { color: var(--red); font-weight: bold; }
        
        .piscante { animation: blink 1s infinite; font-weight: bold; color: var(--red); font-size: 0.9em; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
        
        mark { background: yellow; color: black; }
        footer { text-align: center; margin-top: 40px; font-size: 0.8em; border-top: 1px solid #ddd; padding-top: 10px; }
        
        .mes-titulo { width: 100%; grid-column: 1 / -1; background: #eee; padding: 5px 15px; color: var(--red); font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>ANIVERSARIANTES</h2>
    <p>Total de Registros: <span id="total-registros">0</span></p>

    <input type="text" id="busca" class="search-box" placeholder="Busque por nome, mês ou signo...">

    <div id="painel-passado" class="panel panel-red"></div>
    <div id="painel-futuro" class="panel panel-green"></div>

    <div id="lista-aniversariantes" class="grid"></div>

    <footer>
        ©Amarildo, 2016-2026<br>
        Atualizado: 01/02/2026
    </footer>
</div>

<script>
    const baseUrl = "https://amarildo1963.github.io/jaa/fotos/";
    const dadosBrutos = [
        "INGRID GRAZIELA FERNANDES ANERÃO,*06/01/1997,ingrid.jpg",
        "MARIA AMARILZA ANERÃO,*14/01/1969,amarilza.jpg",
        "SANDRA REGINA MOLLER DE CAMPOS,*22/01/1964,+20/07/2020,sandra.jpg",
        "ROSA FRACHELLI ANERÃO,*01/02/1901,+15/01/1971,rosa_frachelli.jpg",
        "BRAZ GESTICH,*03/02/1944,+08/05/2023,braz.jpg",
        "HUMBERTO DONIZETE ANERÃO,*22/02/1961,+14/07/2021,humberto.png",
        "PRISCILA TOLEDO RETI,*03/03/1990,priscila.jpg",
        "VALERIA APARECIDA GESTICH,*07/03/1988,valeria.jpg",
        "IRIA RIBEIRO ANERÃO,*23/03/1930,+10/01/1979,iria.jpg",
        "ZULMIRA BORGES GESTICH,*25/03/1907,+19/09/1964,zulmira.JPG",
        "NICOLAS MIGUEL ANERÃO FONSECA,*25/03/2014,nicolas.jpg",
        "JOSÉ AMARILDO ANERÃO,*30/03/1963,amarildo.jpg",
        "IVANIRA FERREIRA LIMA,*01/04/1973,ivanira.jpg",
        "MARIA DE LOURDES MALAQUIAS GESTICH,*07/04/1955,maria_lourdes.jpg",
        "ROSA APARECIDA ANERÃO DE JESUS,*08/04/1950,+20/09/2021,rosa_aparecida.jpg",
        "AURORA RIBEIRO,*16/04/1946,aurora.jpg",
        "ARLINDO FRANCISCO RIBEIRO,*16/04/1948,+24/10/2001,arlindo.jpg",
        "DIONATAS WILLIAN DE SOUZA FONSECA,*18/04/1992,dionatas.jpg",
        "CAROLINA GABRIELA FERNANDES ANERÃO,*04/05/1994,carolina.jpg",
        "JOSÉ REGINALDO GESTICH,*29/05/1980,jose_reginaldo.jpg",
        "KARINA KRISTINA LIMA ANERÃO,*30/05/1996,karina.jpg",
        "GENÉSIO DE SOUZA,*11/06/1947,+08/02/2000,genesio.jpg",
        "AMÉLIA ANERÃO DONEDA,*15/06/1926,+23/02/2020,amelia.png",
        "JOÃO PAULO GESTICH,*19/06/1984,joao_paulo.jpg",
        "JOÃO GESTICH,*24/06/1895,+04/05/1980,joao_gestich.jpg",
        "LEONOR OLIVEIRA DE SOUZA,*29/06/1951,+21/03/2019,leonor.jpg",
        "GUILHERME GABRIEL FERNANDES ANERÃO,*06/07/2009,guilherme.jpg",
        "ELIAS GESTICH,*27/07/1948,elias.jpg",
        "ANTONIO FERNANDES DE LIMA,*18/08/1943,+28/02/2019,Antonio_lima.jpg",
        "JOÃO ANERÃO,*24/08/1924,+30/01/2007,joao_anerao.png",
        "JOSÉ ANERÃO,*25/08/1889,+11/08/1976,jose_anerao.jpg",
        "LAURA RACHEL DIAS LINS ANERÃO,*05/09/1982,laura.jpg",
        "APARECIDA ORDÁLIA GARCIA DE LIMA,*07/09/1943,aparecida.jpg",
        "MARIA CRISTINA ANERÃO,*10/09/1941,+12/03/2023,cristina.jpg",
        "LEANDRO HENRIQUE DE LIMA NETO,*29/09/1990,leandro.jpg",
        "PAULO DE ASSIS ANERÃO,*18/10/1962,paulo.jpg",
        "ANTONIO AMAURI ANERÃO,*19/10/1965,amauri.jpg",
        "SONIA REGINA MOLLER,*21/10/1975,+10/10/2019,sonia.jpg",
        "ANTONIO AMAURI ANERÃO JUNIOR,*24/10/1991,amauri_jr.jpg",
        "SOLAMITA FERNANDES DE LIMA,*30/10/1972,solamita.jpg",
        "VICENTE GESTICH,*13/11/1938,+27/05/2022,vicente.jpg",
        "LUIZ FERNANDO LIMA ANERÃO,*27/11/2005,luiz.jpg",
        "ARVELINO ANERÃO,*29/11/1937,+02/07/2007,arvelino.png",
        "SANDRO FERNANDES DE LIMA,*29/11/1974,+23/12/2016,sandro.jpg",
        "ANTONIO GESTICH,*02/12/1951,antonio_gestich.jpg",
        "ROSA LIA ANERÃO MOLLER,*15/12/1943,rosalina.jpg",
        "RITA DE CÁSSIA RIBEIRO,*18/12/1974,rita.jpg",
        "REGINA APARECIDA RIBEIRO,*21/12/1971,regina.jpg",
        "NATAL DO MENINO JESUS (25/12),jesus.jpg"
    ];

    const hoje = new Date();
    const mesesExtenso = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];

    function getSigno(dia, mes) {
        const signos = [
            {n: "Capricórnio", s:"♑"}, {n: "Aquário", s:"♒"}, {n: "Peixes", s:"♓"}, {n: "Áries", s:"♈"}, 
            {n: "Touro", s:"♉"}, {n: "Gêmeos", s:"♊"}, {n: "Câncer", s:"♋"}, {n: "Leão", s:"♌"}, 
            {n: "Virgem", s:"♍"}, {n: "Libra", s:"♎"}, {n: "Escorpião", s:"♏"}, {n: "Sagitário", s:"♐"}
        ];
        const limites = [20, 19, 20, 20, 21, 21, 22, 23, 23, 23, 22, 21];
        let idx = (dia > limites[mes - 1]) ? mes : mes - 1;
        return signos[idx % 12];
    }

    function parseData(str) {
        if (!str) return null;
        const [d, m, y] = str.replace(/[^\d/]/g, '').split('/').map(Number);
        const date = new Date();
        date.setFullYear(y, m - 1, d);
        date.setHours(0, 0, 0, 0);
        return date;
    }

    function calcularIdade(nasc, ref) {
        let idade = ref.getFullYear() - nasc.getFullYear();
        const m = ref.getMonth() - nasc.getMonth();
        if (m < 0 || (m === 0 && ref.getDate() < nasc.getDate())) idade--;
        return idade;
    }

    const pessoas = dadosBrutos.map(linha => {
        const partes = linha.split(',');
        const natal = linha.includes("NATAL");
        if (natal) return { nome: partes[0], foto: partes[1], isNatal: true, mes: 12, dia: 25 };

        const nascStr = partes.find(p => p.startsWith('*'));
        const falecStr = partes.find(p => p.startsWith('+'));
        const foto = partes[partes.length - 1];

        const dNasc = parseData(nascStr);
        const dFalec = parseData(falecStr);
        
        return {
            nome: partes[0],
            dNasc,
            dFalec,
            foto,
            dia: dNasc.getDate(),
            mes: dNasc.getMonth() + 1,
            signo: getSigno(dNasc.getDate(), dNasc.getMonth() + 1)
        };
    });

    function render(filtro = "") {
        const termo = filtro.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
        const lista = document.getElementById('lista-aniversariantes');
        const passados = [];
        const futuros = [];
        lista.innerHTML = "";
        
        let count = 0;
        let mesAtual = -1;

        // Ordenação por mês e dia
        const ordenados = [...pessoas].sort((a,b) => a.mes - b.mes || a.dia - b.dia);

        ordenados.forEach(p => {
            const nomeNormal = p.nome.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
            const mesNome = mesesExtenso[p.mes-1].toLowerCase();
            const signoNome = p.signo ? p.signo.n.toLowerCase() : "";

            if (termo && !nomeNormal.includes(termo) && !mesNome.includes(termo) && !signoNome.includes(termo)) return;
            count++;

            // Agrupamento por mês
            if (p.mes !== mesAtual) {
                mesAtual = p.mes;
                const h = document.createElement('div');
                h.className = 'mes-titulo';
                h.innerText = mesesExtenso[mesAtual-1].toUpperCase();
                lista.appendChild(h);
            }

            // Lógica de Painéis (30 dias)
            if (!p.isNatal) {
                const dataAnivEsteAno = new Date(hoje.getFullYear(), p.mes - 1, p.dia);
                const diffDias = Math.ceil((dataAnivEsteAno - hoje) / (1000 * 60 * 60 * 24));
                
                if (diffDias < 0 && diffDias >= -30) passados.push(p.nome);
                if (diffDias >= 0 && diffDias <= 30) futuros.push(p.nome);
            }

            // Template do Card
            const card = document.createElement('div');
            card.className = 'card';
            
            let html = `<img src="${baseUrl}${p.foto}" class="moldura" onerror="this.src='https://via.placeholder.com'">`;
            
            const nomeExibicao = termo ? p.nome.replace(new RegExp(termo, 'gi'), m => `<mark>${m}</mark>`) : p.nome;
            html += `<span class="nome">${nomeExibicao}</span>`;

            if (p.isNatal) {
                html += `</div>`;
                card.innerHTML = html;
                lista.appendChild(card);
                return;
            }

            const idade = calcularIdade(p.dNasc, p.dFalec || hoje);
            const isAnivHoje = hoje.getDate() === p.dia && hoje.getMonth() === (p.mes - 1);

            html += `<div class="data-nasc">*${p.dia.toString().padStart(2,'0')}/${p.mes.toString().padStart(2,'0')}/${p.dNasc.getFullYear()}</div>`;
            
            if (p.dFalec) {
                const anosFalec = calcularIdade(p.dFalec, hoje);
                html += `<div class="data-falec">✝ ${p.dFalec.toLocaleDateString('pt-BR')} (Há ${anosFalec} anos)</div>`;
                if (isAnivHoje) html += `<div class="piscante">Faria aniversário hoje!</div>`;
            } else {
                if (isAnivHoje) html += `<div class="piscante">Parabéns, Feliz Aniversário!</div>`;
            }

            html += `<div class="idade-destaque">${idade} anos</div>`;
            html += `<div class="signo">${p.signo.s} ${p.signo.n}</div>`;
            
            card.innerHTML = html;
            lista.appendChild(card);
        });

        document.getElementById('total-registros').innerText = count;
        document.getElementById('painel-passado').innerText = "Fizeram aniversário há 30 dias: " + (passados.join(", ") || "Ninguém");
        document.getElementById('painel-futuro').innerText = "Fazem aniversário daqui 30 dias: " + (futuros.join(", ") || "Ninguém");
    }

    document.getElementById('busca').addEventListener('input', (e) => render(e.target.value));
    
    // Inicializar
    render();
</script>

</body>
</html>
